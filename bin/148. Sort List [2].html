<html>
<head>
  <title>148. Sort List</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="391"/>
<h1>148. Sort List</h1>

<div>
<span bgcolor="#FFFFFF"><div><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>148. Sort List</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/sort-list/description/">https://leetcode.com/problems/sort-list/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Sort a linked list in </span><i style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">O</i><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">(</span><i style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">n</i><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;"> log </span><i style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">n</i><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">) time using constant space complexity.</span></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></span></div><div>解法：时间复杂度要求为O（nlogn）， 并且固定空间。可以想到合并排序。使用合并排序的思想，在list链表中，一样可以使用。</div><div>代码：</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>/**</div><div> * Definition for singly-linked list.</div><div> * public class ListNode {</div><div> *     int val;</div><div> *     ListNode next;</div><div> *     ListNode(int x) { val = x; }</div><div> * }</div><div> */</div><div>class Solution {</div><div>    public ListNode sortList(ListNode head) {</div><div>        if(head == null || head.next == null)</div><div>            return head;</div><div><br/></div><div>        ListNode slow = head;</div><div>        ListNode fast = head;</div><div><br/></div><div>        while(fast.next != null &amp;&amp; fast.next.next != null){</div><div>            slow = slow.next;</div><div>            fast = fast.next.next;</div><div>        }</div><div>        fast = slow.next;</div><div>        slow.next = null;</div><div><br/></div><div>        //将链表拆分两半</div><div><br/></div><div>        ListNode pre = sortList(head);</div><div>        ListNode tail = sortList(fast);</div><div><br/></div><div><br/></div><div>        //将出拆分的两半链表排序</div><div>        return pre = helper(pre,tail);</div><div>    }</div><div><br/></div><div>    public ListNode helper(ListNode pre, ListNode tail){</div><div>        if(tail == null )return pre;</div><div>        if(pre == null) return tail;</div><div><br/></div><div>        ListNode head;</div><div>        ListNode temp;</div><div><br/></div><div>        if(pre.val &gt; tail.val){</div><div>            temp = tail;</div><div>            tail = tail.next;</div><div>            temp.next = pre;         </div><div>            pre = temp;</div><div>        }</div><div>        head = pre;</div><div>        ListNode point = head;</div><div>        pre = pre.next;</div><div><br/></div><div>        while(pre != null || tail != null){</div><div>            if(pre == null){</div><div>                point.next = tail;</div><div>                break;</div><div>            }</div><div>            if(tail == null){</div><div>                break;</div><div>            }</div><div>            if(pre.val &lt;= tail.val){</div><div>                if(point.next != null)</div><div>                    point = point.next;</div><div>                pre = pre.next;</div><div>                continue;</div><div>            }else{</div><div>                temp = tail;</div><div>                tail = tail.next;</div><div>                temp.next = point.next;</div><div>                point.next = temp;</div><div>                point = point.next;</div><div>            }</div><div>        }</div><div>        return head;</div><div>    }</div><div>}</div></div><div><br/></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>133. Clone Graph</h1><b>来源网址：</b> <a href="https://blog.csdn.net/linhuanmars/article/details/22715747">https://blog.csdn.net/linhuanmars/article/details/22715747</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px 0px 16px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; word-break: break-all;"><ol start="133"><li>Clone Graph<br/></li></ol></div></div><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; word-break: break-all;"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px;">这道题是LeetCode中为数不多的关于图的题目，不过这道题还是比较基础，就是考察图非常经典的方法：</span><a href="http://zh.wikipedia.org/wiki/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2" style="box-sizing: border-box; outline: 0px; color: rgb(33, 135, 187); text-decoration: none; cursor: pointer; word-break: break-all; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px;" target="_blank">深度优先搜索</a><span style="box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px;">和</span><a href="http://zh.wikipedia.org/wiki/%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2" style="box-sizing: border-box; outline: 0px; color: rgb(33, 135, 187); text-decoration: none; cursor: pointer; word-break: break-all; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px;" target="_blank">广度优先搜索</a><span style="box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px;">。这道题用两种方法都可以解决，因为只是一个图的复制，用哪种遍历方式都可以。具体细节就不多说了，因为两种方法太常见了。这里恰好可以用旧结点和新结点的HashMap来做visited的记录。下面是广度优先搜索的代码： </span><div style="box-sizing: border-box; outline: 0px; padding: 1px 0px 0px; margin: 0px 0px 24px; position: relative; overflow-y: hidden; overflow-x: auto; font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; background-color: rgb(231, 229, 220); width: 843.469px; text-align: left; word-break: break-all;"><div style="box-sizing: border-box; outline: 0px; padding: 0px 0px 0px 45px; margin: 0px; word-break: break-all;"><div style="box-sizing: border-box; outline: 0px; padding: 3px 8px 10px 10px; margin: 0px; word-break: break-all; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left: 3px solid rgb(108, 226, 108); border-right: 1px solid rgb(231, 229, 220);"><b style="box-sizing: border-box; outline: 0px; font-weight: bold; word-break: break-all;">[java]</b> <a href="https://blog.csdn.net/linhuanmars/article/details/22715747#" style="box-sizing: border-box; outline: 0px; color: rgb(103, 149, 181); text-decoration: none; cursor: pointer; background-image: url(&quot;https://csdnimg.cn/release/phoenix/images/ico_plain.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; word-break: break-all; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" title="view plain">view plain</a><span style="box-sizing: border-box; outline: 0px; word-break: break-all;"> <a href="https://blog.csdn.net/linhuanmars/article/details/22715747#" style="box-sizing: border-box; outline: 0px; color: rgb(103, 149, 181); text-decoration: none; cursor: pointer; background-image: url(&quot;https://csdnimg.cn/release/phoenix/images/ico_copy.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; word-break: break-all; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" title="copy">copy</a></span></div></div><ol start="1" style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px 0px 24px; list-style: decimal; border-top: none; border-right: 1px solid rgb(231, 229, 220); border-bottom: none; border-left: none; border-image: initial; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92); word-break: break-all;"><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">public</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> UndirectedGraphNode cloneGraph(UndirectedGraphNode node) {  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(node==</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    LinkedList&lt;UndirectedGraphNode&gt; queue = <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> LinkedList&lt;UndirectedGraphNode&gt;();  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    HashMap&lt;UndirectedGraphNode, UndirectedGraphNode&gt; map = <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> HashMap&lt;UndirectedGraphNode, UndirectedGraphNode&gt;();  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    UndirectedGraphNode copy = <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> UndirectedGraphNode(node.label);  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    map.put(node,copy);  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    queue.offer(node);  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">while</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(!queue.isEmpty())  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    {  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        UndirectedGraphNode cur = queue.poll();  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">for</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">int</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> i=</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;i&lt;cur.neighbors.size();i++)  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        {  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(!map.containsKey(cur.neighbors.get(i)))  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            {  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                copy = <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> UndirectedGraphNode(cur.neighbors.get(i).label);  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                map.put(cur.neighbors.get(i),copy);  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                queue.offer(cur.neighbors.get(i));  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            map.get(cur).neighbors.add(map.get(cur.neighbors.get(i)));  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> map.get(node);  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><span style="box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px;">深度优先搜索的代码如下：</span><div style="box-sizing: border-box; outline: 0px; padding: 1px 0px 0px; margin: 0px 0px 24px; position: relative; overflow-y: hidden; overflow-x: auto; font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; background-color: rgb(231, 229, 220); width: 843.469px; text-align: left; word-break: break-all;"><div style="box-sizing: border-box; outline: 0px; padding: 0px 0px 0px 45px; margin: 0px; word-break: break-all;"><div style="box-sizing: border-box; outline: 0px; padding: 3px 8px 10px 10px; margin: 0px; word-break: break-all; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left: 3px solid rgb(108, 226, 108); border-right: 1px solid rgb(231, 229, 220);"><b style="box-sizing: border-box; outline: 0px; font-weight: bold; word-break: break-all;">[java]</b> <a href="https://blog.csdn.net/linhuanmars/article/details/22715747#" style="box-sizing: border-box; outline: 0px; color: rgb(103, 149, 181); text-decoration: none; cursor: pointer; background-image: url(&quot;https://csdnimg.cn/release/phoenix/images/ico_plain.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; word-break: break-all; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" title="view plain">view plain</a><span style="box-sizing: border-box; outline: 0px; word-break: break-all;"> <a href="https://blog.csdn.net/linhuanmars/article/details/22715747#" style="box-sizing: border-box; outline: 0px; color: rgb(103, 149, 181); text-decoration: none; cursor: pointer; background-image: url(&quot;https://csdnimg.cn/release/phoenix/images/ico_copy.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; word-break: break-all; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" title="copy">copy</a></span></div></div><ol start="1" style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px 0px 24px; list-style: decimal; border-top: none; border-right: 1px solid rgb(231, 229, 220); border-bottom: none; border-left: none; border-image: initial; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92); word-break: break-all;"><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">public</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> UndirectedGraphNode cloneGraph(UndirectedGraphNode node) {  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(node == </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    LinkedList&lt;UndirectedGraphNode&gt; stack = <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> LinkedList&lt;UndirectedGraphNode&gt;();  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    HashMap&lt;UndirectedGraphNode, UndirectedGraphNode&gt; map = <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> HashMap&lt;UndirectedGraphNode, UndirectedGraphNode&gt;();  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    stack.push(node);  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    UndirectedGraphNode copy = <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> UndirectedGraphNode(node.label);  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    map.put(node,copy);  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">while</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(!stack.isEmpty())  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    {  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        UndirectedGraphNode cur = stack.pop();  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">for</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">int</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> i=</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;i&lt;cur.neighbors.size();i++)  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        {  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(!map.containsKey(cur.neighbors.get(i)))  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            {  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                copy = <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> UndirectedGraphNode(cur.neighbors.get(i).label);  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                map.put(cur.neighbors.get(i),copy);  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                stack.push(cur.neighbors.get(i));  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            map.get(cur).neighbors.add(map.get(cur.neighbors.get(i)));  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> map.get(node);  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><span style="box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px;">当然深度优先搜索也可以用递归来实现，代码如下：</span><div style="box-sizing: border-box; outline: 0px; padding: 1px 0px 0px; margin: 0px 0px 24px; position: relative; overflow-y: hidden; overflow-x: auto; font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; background-color: rgb(231, 229, 220); width: 843.469px; text-align: left; word-break: break-all;"><div style="box-sizing: border-box; outline: 0px; padding: 0px 0px 0px 45px; margin: 0px; word-break: break-all;"><div style="box-sizing: border-box; outline: 0px; padding: 3px 8px 10px 10px; margin: 0px; word-break: break-all; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left: 3px solid rgb(108, 226, 108); border-right: 1px solid rgb(231, 229, 220);"><b style="box-sizing: border-box; outline: 0px; font-weight: bold; word-break: break-all;">[java]</b> <a href="https://blog.csdn.net/linhuanmars/article/details/22715747#" style="box-sizing: border-box; outline: 0px; color: rgb(103, 149, 181); text-decoration: none; cursor: pointer; background-image: url(&quot;https://csdnimg.cn/release/phoenix/images/ico_plain.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; word-break: break-all; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" title="view plain">view plain</a><span style="box-sizing: border-box; outline: 0px; word-break: break-all;"> <a href="https://blog.csdn.net/linhuanmars/article/details/22715747#" style="box-sizing: border-box; outline: 0px; color: rgb(103, 149, 181); text-decoration: none; cursor: pointer; background-image: url(&quot;https://csdnimg.cn/release/phoenix/images/ico_copy.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; word-break: break-all; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" title="copy">copy</a></span></div></div><ol start="1" style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px 0px 24px; list-style: decimal; border-top: none; border-right: 1px solid rgb(231, 229, 220); border-bottom: none; border-left: none; border-image: initial; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92); word-break: break-all;"><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">public</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> UndirectedGraphNode cloneGraph(UndirectedGraphNode node) {  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(node == </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    HashMap&lt;UndirectedGraphNode, UndirectedGraphNode&gt; map = <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> HashMap&lt;UndirectedGraphNode, UndirectedGraphNode&gt;();  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    UndirectedGraphNode copy = <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> UndirectedGraphNode(node.label);  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    map.put(node,copy);  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    helper(node,map);  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> copy;  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">private</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">void</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> helper(UndirectedGraphNode node, HashMap&lt;UndirectedGraphNode, UndirectedGraphNode&gt; map)  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">{  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">for</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">int</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> i=</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;i&lt;node.neighbors.size();i++)  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    {   </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        UndirectedGraphNode cur = node.neighbors.get(i);  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(!map.containsKey(cur))  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        {  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            UndirectedGraphNode copy = <span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> UndirectedGraphNode(cur.label);  </span></span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            map.put(cur,copy);  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            helper(cur,map);  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        map.get(node).neighbors.add(map.get(cur));  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="box-sizing: border-box; outline: 0px; padding: 0px 3px 0px 10px !important; margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important; word-break: break-all;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><div><span style="box-sizing: border-box; outline: 0px; word-break: break-all; color: rgb(34, 34, 34); font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px;">这几种方法的时间复杂度都是O(n)（每个结点访问一次），而空间复杂度则是栈或者队列的大小加上HashMap的大小，也不会超过O(n)。图的两种遍历方式是比较经典的问题了，虽然在面试中出现的不多，但是还是有可能出现的，而且如果出现了就必须做好，所以大家还是得好好掌握哈。</span></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>127. Word Ladder</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/word-ladder/description/">https://leetcode.com/problems/word-ladder/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Given two words (<em style="box-sizing: border-box;">beginWord</em> and <em style="box-sizing: border-box;">endWord</em>), and a dictionary's word list, find the length of shortest transformation sequence from <em style="box-sizing: border-box;">beginWord</em> to <em style="box-sizing: border-box;">endWord</em>, such that:</p><ol style="box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">Only one letter can be changed at a time.</li><li style="box-sizing: border-box;">Each transformed word must exist in the word list. Note that <em style="box-sizing: border-box;">beginWord</em> is <em style="box-sizing: border-box;">not</em> a transformed word.</li></ol><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><strong style="box-sizing: border-box; font-weight: 700;">Note:</strong></p><ul style="box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box;"><span style="color: rgb(51, 51, 51);">Return 0 if there is no such transformation sequence.</span></li><li style="box-sizing: border-box;"><span style="color: rgb(51, 51, 51);">All words have the same length.</span></li><li style="box-sizing: border-box;"><span style="color: rgb(51, 51, 51);">All words contain only lowercase alphabetic characters.</span></li><li style="box-sizing: border-box;"><span style="color: rgb(51, 51, 51);">You may assume no duplicates in the word list.</span></li><li style="box-sizing: border-box;"><span style="color: rgb(51, 51, 51);">You may assume <em style="box-sizing: border-box;">beginWord</em> and <em style="box-sizing: border-box;">endWord</em> are non-empty and are not the same.</span></li></ul><div style="box-sizing: border-box;"><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><strong style="box-sizing: border-box; font-weight: 700;">Example 1:</strong></p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><strong style="box-sizing: border-box; font-weight: 700;">Input:</strong>
beginWord = &quot;hit&quot;,
endWord = &quot;cog&quot;,
wordList = [&quot;hot&quot;,&quot;dot&quot;,&quot;dog&quot;,&quot;lot&quot;,&quot;log&quot;,&quot;cog&quot;]

<strong style="box-sizing: border-box; font-weight: 700;">Output: </strong>5

<strong style="box-sizing: border-box; font-weight: 700;">Explanation:</strong> As one shortest transformation is &quot;hit&quot; -&gt; &quot;hot&quot; -&gt; &quot;dot&quot; -&gt; &quot;dog&quot; -&gt; &quot;cog&quot;,
return its length 5.
</pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><strong style="box-sizing: border-box; font-weight: 700;">Example 2:</strong></p><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><strong style="box-sizing: border-box; font-weight: 700;">Input:</strong><br/>
beginWord = &quot;hit&quot;<br/>
endWord = &quot;cog&quot;<br/>
wordList = [&quot;hot&quot;,&quot;dot&quot;,&quot;dog&quot;,&quot;lot&quot;,&quot;log&quot;]<br/><br/><strong style="box-sizing: border-box; font-weight: 700;">Output:</strong> 0<br/><br/><div><strong style="box-sizing: border-box; font-weight: 700;">Explanation:</strong> The endWord &quot;cog&quot; is not in wordList, therefore no possible<strong style="box-sizing: border-box; font-weight: 700;"> </strong>transformation.</div></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><p style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px 0px 16px; font-size: 16px; color: rgb(79, 79, 79); font-weight: normal; text-align: justify; word-break: break-all; font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">大概意思就是给定两个长度相同的单词，找到一个方法，让第一个单词变化到第二个单词，每次只能变化一个字母，而且中间出现的都必须是字典里的单词，求这个转换次数最少的方法要用经过多少个单词。</p><p style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px 0px 16px; font-size: 16px; color: rgb(79, 79, 79); font-weight: normal; text-align: justify; word-break: break-all; font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><strong style="box-sizing: border-box; outline: 0px; font-weight: 700; word-break: break-all;">思路分析：</strong> <br style="box-sizing: border-box; outline: 0px; word-break: break-all;"/>
最开始看到这个题的时候，可能会不知道怎么做，不过稍微想想，就可以想到，可以把最开始的单词的所有相差一个字母的单词都找出来，一个个尝试，再一个个试下去，总会找到的。再认真想想，咦？这不就是搜索吗，是不是想到了什么。可以看出来，这题其实是一道关于图的题，问题就是一个无权图求最短路径的问题，我们都知道有权图求最短路径要用dijistra算法，无权图更简单，只要用BFS就可以了。所以可以分析出来，这个题目的解法是BFS。 <br style="box-sizing: border-box; outline: 0px; word-break: break-all;"/>
但是确定了使用BFS以后，还有一些问题没有解决，因为题目并没有给定图，我们还得自己构建一个图，怎么构建呢？在字典中把长度相同的单词都遍历一遍，构建一个二维数组，也就是邻接表，这样就可以做了。这个想法是正确的，但会超时，因为效率太低，由于要把所有长度单词遍历一遍，并且比较和哪些单词相差一个单词，需要用一个二重循环实现，所以复杂度是O(n2)，字典里单词数量大， 这个复杂度的算法就会很低效。 <br style="box-sizing: border-box; outline: 0px; word-break: break-all;"/>
因为BFS已经确定下来了，想要降低复杂度应该是从构建图这里入手，构建邻接表显然没那么必要，因为那么多的单词里面，只有少数单词之间是可以一步转换的，如果不能一个个遍历来找，我们还可以自己创造，通过改变当前单词，来确定这个单词的邻居，通过把单词的每个字母都从‘a’到‘z’变化（除了原本自身），来产生新单词，这样的单词一定是一步可达的，再判断这新单词是否存在于字典中，若存在，则放进队列中（BFS算法进行），这里注意还要把新产生的单词从词典中删除，避免出现死循环，例如hot变成dot以后，dot又变回了hot，这样一来，时间复杂度是O(26*单词长度*n），比之前要高效，代码实现如下，可通过</p><div style="box-sizing: border-box; outline: 0px; padding: 8px 16px 4px 56px; margin: 0px 0px 24px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgb(246, 248, 250); border: none; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; outline: 0px; display: block; padding: 0px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; background-color: rgb(246, 248, 250); border-radius: 4px; overflow-x: auto;"><span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">class</span> Solution {<br/><span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">public</span>:<br/>
    <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">int</span> ladderLength(<span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span> beginWord, <span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span> endWord, <span style="box-sizing: border-box; outline: 0px;"><span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">unordered_set</span>&lt;<span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span>&gt;</span>&amp; wordList) {   <br/>
        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(beginWord.size()==<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">0</span>||endWord.size()==<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">0</span>)  <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">return</span> <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">0</span>;<br/>
        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(beginWord.size()!=endWord.size())    <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">return</span> <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">0</span>; <br/><br/>
        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">int</span> n = beginWord.size();<br/>
        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">bool</span> exist = <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">false</span>;<br/>
        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">int</span> step = <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">1</span>; <br/>
        <span style="box-sizing: border-box; outline: 0px;"><span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">queue</span>&lt;<span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span>&gt;</span> q;  <span style="box-sizing: border-box; outline: 0px; color: rgb(136, 0, 0);">//BFS的队列</span><br/><br/>
        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">while</span>(!q.empty())   q.pop();<br/>
        q.push(beginWord);<br/>
        q.push(<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 153, 0);">&quot;1&quot;</span>); <span style="box-sizing: border-box; outline: 0px; color: rgb(136, 0, 0);">//用于分割各层 </span><br/>
        wordList.erase(beginWord);  <span style="box-sizing: border-box; outline: 0px; color: rgb(136, 0, 0);">//防止下一层的单词变化产生之前已经出现的单词，入栈后就把单词删掉 </span><br/>
        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">while</span>(!q.empty()){<br/>
            <span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span> word = q.front();<br/>
            q.pop(); <br/>
            <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(word == endWord){<br/>
                exist = <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">true</span>;<br/>
                <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">break</span>;<br/>
            }<br/>
            <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(word == <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 153, 0);">&quot;1&quot;</span>){<br/>
                step++;<br/>
                <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">continue</span>;<br/>
            }<br/>
            <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">for</span>(<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">int</span> i=<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">0</span>; i&lt;n; ++i){<br/>
                <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">char</span> temp = word[i];<br/>
                <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">for</span>(<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">char</span> x=<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 153, 0);">'a'</span>; x&lt;=<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 153, 0);">'z'</span>; x++){<br/>
                    <span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span> tmp = word;<br/>
                    <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(x!=temp){<br/>
                        tmp[i] = x;<br/>
                        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(wordList.find(tmp) != wordList.end())    q.push(tmp);<br/>
                        wordList.erase(tmp);<br/>
                    }<br/>
                }<br/>
            }<br/>
            <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(!q.empty()&amp;&amp;q.front()==<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 153, 0);">&quot;1&quot;</span>)  <span style="box-sizing: border-box; outline: 0px; color: rgb(136, 0, 0);">//若对首为分割标记1，说明这一层已经遍历完成，可以新加入一个分层标记 </span><br/>
            q.push(<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 153, 0);">&quot;1&quot;</span>); <br/>
        } <br/>
        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(exist)   <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">return</span> step;</code><div><span style="font-size: 14px;"><span style="font-family: Consolas, Inconsolata, Courier, monospace;"><span style="background-color: rgb(246, 248, 250);">        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">else</span>    <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">return</span> <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">0</span>; </span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, Inconsolata, Courier, monospace;"><span style="background-color: rgb(246, 248, 250);">    </span></span></span></div></div></div><div><p style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px 0px 16px; font-size: 16px; color: rgb(79, 79, 79); font-weight: normal; text-align: justify; word-break: break-all; font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">提交以后可以看到 <br style="box-sizing: border-box; outline: 0px; word-break: break-all;"/><img src="148. Sort List [2]_files/Image.png" type="image/png" alt="这里写图片描述" style="box-sizing: border-box; outline: 0px; margin: 24px 0px; max-width: 100%; word-break: break-all; height: auto;"/> <br style="box-sizing: border-box; outline: 0px; word-break: break-all;"/>
运行时间耗费496ms，只打败了17%的人，说明这个算法效率还是比较低的，仍可以改进。</p><p style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px 0px 16px; font-size: 16px; color: rgb(79, 79, 79); font-weight: normal; text-align: justify; word-break: break-all; font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">由于这个题目，我们的起点的目标点都是确定的，所以可以使用双向BFS方法提高效率，由于BFS每下一层搜索范围就大了很多，如果双向开始，可以大大减小搜索范围，提高效率，实现代码如下</p><div style="box-sizing: border-box; outline: 0px; padding: 8px 16px 4px 56px; margin: 0px 0px 24px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgb(246, 248, 250); border: none; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; outline: 0px; display: block; padding: 0px; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; background-color: rgb(246, 248, 250); border-radius: 4px; overflow-x: auto;"><span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">class</span> Solution {<br/><span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">public</span>:<br/>
    <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">int</span> ladderLength(<span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span> beginWord, <span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span> endWord, <span style="box-sizing: border-box; outline: 0px;"><span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">unordered_set</span>&lt;<span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span>&gt;</span>&amp; wordList) {<br/>
        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(beginWord.size()==<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">0</span>||endWord.size()==<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">0</span>)  <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">return</span> <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">0</span>;<br/>
        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(beginWord.size()!=endWord.size())    <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">return</span> <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">0</span>; <br/><br/>
        <span style="box-sizing: border-box; outline: 0px;"><span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">unordered_set</span>&lt;<span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span>&gt;</span> head,tail,*phead,*ptail; <br/>
        head.insert(beginWord);<br/>
        tail.insert(endWord);<br/>
        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">int</span> step = <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">2</span>;   <span style="box-sizing: border-box; outline: 0px; color: rgb(136, 0, 0);">//因为是双向，从一开始就有2层 </span><br/><br/>
        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">while</span>(!head.empty()&amp;&amp;!tail.empty()){<br/>
            <span style="box-sizing: border-box; outline: 0px; color: rgb(136, 0, 0);">//双向交替进行BFS，每次选择分支少的一边开始 </span><br/>
            <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(head.size()&lt;tail.size()){<br/>
                phead = &amp;head;<br/>
                ptail = &amp;tail;<br/>
            }<br/>
            <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">else</span>{<br/>
                phead = &amp;tail;<br/>
                ptail = &amp;head;<br/>
            }<br/>
            <span style="box-sizing: border-box; outline: 0px;"><span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">unordered_set</span>&lt;<span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span>&gt;</span> temp; <br/>
            <span style="box-sizing: border-box; outline: 0px;"><span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">unordered_set</span>&lt;<span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span>&gt;</span>::iterator it;<br/>
            <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">for</span>(it=phead-&gt;begin(); it!=phead-&gt;end(); ++it){<br/>
                <span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span> word = *it;<br/>
                wordList.erase(word);<br/>
                <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">int</span> n = word.size();<br/>
                <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">for</span>(<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">int</span> i=<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 102, 102);">0</span>; i&lt;n; ++i){<br/>
                    <span style="box-sizing: border-box; outline: 0px; color: rgb(79, 79, 79);">string</span> tmp = word;<br/>
                    <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">for</span>(<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">char</span> x=<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 153, 0);">'a'</span>; x&lt;=<span style="box-sizing: border-box; outline: 0px; color: rgb(0, 153, 0);">'z'</span>; ++x){<br/>
                        <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(x!=tmp[i]){<br/>
                            tmp[i] = x;<br/>
                            <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(ptail-&gt;find(tmp)!=ptail-&gt;end())     <br/>
                            <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">return</span> step;<br/>
                            <span style="box-sizing: border-box; outline: 0px; color: rgb(0, 0, 136);">if</span>(wordList.find(tmp)!=wordList.end()){<br/>
                                temp.insert(tmp);<br/>
                                wordList.erase(tmp);<br/>
                            }<br/>
                        }<br/>
                    }<br/>
                }       <br/>
            }<br/>
            step++;</code><div><span style="font-size: 14px;"><span style="font-family: Consolas, Inconsolata, Courier, monospace;"><span style="background-color: rgb(246, 248, 250);">            swap(*phead,temp);  <span style="box-sizing: border-box; outline: 0px; color: rgb(136, 0, 0);">//更新phead </span></span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, Inconsolata, Courier, monospace;"><span style="background-color: rgb(246, 248, 250);">   </span></span></span> 23456789101112131415161734445464748</div></div></div><div style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px 0px 16px; font-size: 16px; color: rgb(79, 79, 79); font-weight: normal; text-align: justify; word-break: break-all; font-family: -apple-system, 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun; font-style: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="148. Sort List [2]_files/Image [1].png" type="image/png" alt="这里写图片描述" style="box-sizing: border-box; outline: 0px; margin: 24px 0px; max-width: 100%; word-break: break-all; height: auto;"/> 
<div>只花费了69ms，打败了88%的人，显然这个方法要比原来的方法高效得多。</div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><span style="font-size: 13px;"><br/></span></span></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>200. Number of Islands</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/number-of-islands/description/">https://leetcode.com/problems/number-of-islands/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Given a 2d grid map of <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">'1'</code>s (land) and <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">'0'</code>s (water), count the number of islands. An island is surrounded by water and is formed by connecting adjacent lands horizontally or vertically. You may assume all four edges of the grid are all surrounded by water.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><i style="box-sizing: border-box;"><b style="box-sizing: border-box; font-weight: 700;">Example 1:</b></i></p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">
11110<br style="box-sizing: border-box;"/>11010<br style="box-sizing: border-box;"/>11000<br style="box-sizing: border-box;"/>00000
</pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Answer: 1</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><i style="box-sizing: border-box;"><b style="box-sizing: border-box; font-weight: 700;">Example 2:</b></i></p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">
11000<br style="box-sizing: border-box;"/>11000<br style="box-sizing: border-box;"/>00100<br style="box-sizing: border-box;"/>00011
</pre><div style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>Answer: 3</div><div><br/></div><div>解法：遍历二维网格，如果在点(i,j)上岛（既是遍历的点grid[i][j] == '1'），那么我们可以通过递归的方式，将点(i,j)所在的岛屿整个找出来，且在找的过程中，将找过的点标记，使得在遍历二维网格时，直接忽略掉这些点。</div><div><br/></div><div>递归过程： 在只有在(i,j)点处于网格中，且为岛屿时，才进行递归；相反即在</div><div> if(i &lt; 0 || j &lt; 0 || i &gt; grid.length-1 || j &gt; grid[0].length-1 || grid[i][j] != '1')时，结束递归；</div><div><br/></div><div>代码：</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>class Solution {</div><div>    public int numIslands(char[][] grid) {</div><div>        int num = 0;</div><div>        for(int i = 0; i &lt; grid.length; i++){</div><div>            for(int j = 0; j &lt; grid[0].length; j++){</div><div>                if(grid[i][j] == '1'){</div><div>                    num++;</div><div>                    helper(i,j,grid);</div><div>                }</div><div>            }</div><div>        }</div><div>        return num;</div><div>    }</div><div><br/></div><div>    public void helper(int i, int j, char[][] grid){</div><div>        if(i &lt; 0 || j &lt; 0 || i &gt; grid.length-1 || j &gt; grid[0].length-1 || grid[i][j] != '1')</div><div>            return;</div><div><br/></div><div>        grid[i][j] = '2';</div><div>        helper(i-1,j,grid);</div><div>        helper(i+1,j,grid);</div><div>        helper(i,j-1,grid);</div><div>        helper(i,j+1,grid);</div><div><br/></div><div>    }</div><div>}</div></div><div><br/></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>130. Surrounded Regions</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/surrounded-regions/description/">https://leetcode.com/problems/surrounded-regions/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div style="box-sizing: border-box; position: relative; min-height: 1px; padding: 5px 15px 15px; float: left; width: 727.5px; border-right: 1px solid rgb(236, 240, 241); border-top-left-radius: 0px; border-top-right-radius: 0px; border-top: 0px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; position: relative; margin-top: 20px; margin-bottom: 30px;"><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 0px 0px 10px;">Given a 2D board containing <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">'X'</code> and <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">'O'</code> (the <b style="box-sizing: border-box; font-weight: 700;">letter</b> O), capture all regions surrounded by <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">'X'</code>.</p><p style="box-sizing: border-box; margin: 0px 0px 10px;">A region is captured by flipping all <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">'O'</code>s into <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">'X'</code>s in that surrounded region.</p><p style="box-sizing: border-box; margin: 0px 0px 10px;">For example,<br style="box-sizing: border-box;"/></p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;">
X X X X
X O O X
X X O X
X O X X
</pre><p style="box-sizing: border-box; margin: 0px 0px 10px;"></p><p style="box-sizing: border-box; margin: 0px 0px 10px;">After running your function, the board should be:</p><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;">X X X X<br/>
X X X X<br/>
X X X X
<div>X O X X</div></div><p style="box-sizing: border-box; margin: 0px 0px 10px;"></p></div></div><div style="box-sizing: border-box; margin-top: 15px; font-size: 0.9em;"><hr style="box-sizing: content-box; height: 0px; margin: 0px 0px 15px; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: dotted; border-top-color: rgb(238, 238, 238); border-radius: 0px; padding: 0px;"/><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><div>解法：在此题中如果使用循环，会产生额外大量的存储操作，所以递归在此题中会时间开销上会远远优于循环；</div><div>          如果O被X包围，则会被同化为X，所以只需要找出不被X包围的O即可。</div><div>          如果O不被X包围，则O一定可以通过旁边的O走到边界，即是一定有一条由O构成的路径通向边界。所以只需要寻找与边界O相通的O即可。因此只需要从四个边界搜索为O的点，在搜索此点附近的O点，一直搜索到没有O邻近点为止。</div><div><br/></div><div>代码：</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>class Solution {</div><div>    public void solve(char[][] board) {</div><div>        if(board.length == 0)return;</div><div>        int lenx = board[0].length;</div><div>        int leny = board.length;</div><div>        LinkedList&lt;Integer&gt; posX = new LinkedList&lt;Integer&gt;();</div><div>        LinkedList&lt;Integer&gt; posY = new LinkedList&lt;Integer&gt;();</div><div>        int x, y;</div><div><br/></div><div>        for(int i = 0; i &lt; lenx; i++){</div><div>            if(board[0][i] == 'O'){</div><div>                helper(board,0, i);</div><div>            }</div><div>            if(board[leny-1][i] == 'O'){</div><div>                helper(board,leny-1, i);</div><div>            }</div><div>        }</div><div>        for(int i = 1; i &lt; leny-1; i++){</div><div>            if(board[i][0] == 'O'){</div><div>                helper(board,i, 0);</div><div>            }</div><div>            if(board[i][lenx-1] == 'O'){</div><div>                helper(board, i, lenx-1);</div><div>            }</div><div>        }</div><div><br/></div><div>        for(int i = 0; i &lt; leny; i++){</div><div>            for(int j = 0; j &lt; lenx; j++){</div><div>                if(board[i][j] == 'A'){</div><div>                    board[i][j] = 'O';</div><div>                }</div><div>                else board[i][j] = 'X';</div><div>            }</div><div>        }</div><div>    }</div><div><br/></div><div>    public void helper(char[][] board, int y, int x){</div><div>        board[y][x] = 'A';</div><div>        if(y &gt; 0 &amp;&amp; board[y-1][x] == 'O'){</div><div>            helper(board,y-1,x);</div><div>        }</div><div>        if(x &gt; 0 &amp;&amp; board[y][x-1] == 'O'){</div><div>                helper(board,y, x-1);</div><div>        }</div><div>        if(y &lt; board.length-1 &amp;&amp; board[y+1][x] == 'O'){</div><div>            helper(board,y+1, x);</div><div>        }</div><div>        if(x &lt; board[0].length-1 &amp;&amp; board[y][x+1] == 'O'){</div><div>            helper(board,y, x+1);</div><div>        }</div><div>        return;</div><div>    }</div><div><br/></div><div>}</div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div></div></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>131. Palindrome Partitioning</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/palindrome-partitioning/description/">https://leetcode.com/problems/palindrome-partitioning/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div style="box-sizing: border-box; position: relative; min-height: 1px; padding: 5px 15px 15px; float: left; width: 727.5px; border-right: 1px solid rgb(236, 240, 241); border-top-left-radius: 0px; border-top-right-radius: 0px; border-top: 0px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; position: relative; margin-top: 20px; margin-bottom: 30px;"><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 0px 0px 10px;">Given a string <i style="box-sizing: border-box;">s</i>, partition <i style="box-sizing: border-box;">s</i> such that every substring of the partition is a palindrome.</p><p style="box-sizing: border-box; margin: 0px 0px 10px;">Return all possible palindrome partitioning of <i style="box-sizing: border-box;">s</i>.</p><p style="box-sizing: border-box; margin: 0px 0px 10px;">For example, given <i style="box-sizing: border-box;">s</i> = <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">&quot;aab&quot;</code>,<br style="box-sizing: border-box;"/>
Return</p><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;">[<br/>
  [&quot;aa&quot;,&quot;b&quot;],<br/>
  [&quot;a&quot;,&quot;a&quot;,&quot;b&quot;]
<div>]</div></div><p style="box-sizing: border-box; margin: 0px 0px 10px;"></p></div></div><div style="box-sizing: border-box; margin-top: 15px; font-size: 0.9em;"><hr style="box-sizing: content-box; height: 0px; margin: 0px 0px 15px; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: dotted; border-top-color: rgb(238, 238, 238); border-radius: 0px; padding: 0px;"/><div>解法：使用递归解法，</div><div>           (1)每次从左往右依次判断s.substring(0,i)是否为回文，</div><div>           (2)如果是，则将s.substring(0,i)存入subList中，递归，s = s.substring(i),继续第一步;</div><div>           (3)如果不是，则跳过继续向右遍历。</div><div>           (4)如果s为空，则复制sublist，并存入list中。</div><div><br/></div><div>代码：</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>class Solution {</div><div>    public List&lt;List&lt;String&gt;&gt; partition(String s) {</div><div>        List&lt;List&lt;String&gt;&gt; list = new ArrayList&lt;List&lt;String&gt;&gt;();</div><div>        return helper(list, new ArrayList&lt;String&gt;(), s);</div><div>    }</div><div><br/></div><div>    public List&lt;List&lt;String&gt;&gt; helper(List&lt;List&lt;String&gt;&gt; list, List&lt;String&gt; subList, String s){</div><div>        if(s.isEmpty()){</div><div>            list.add(new ArrayList&lt;&gt;(subList));</div><div>            return list;</div><div>        }</div><div>        int len = s.length();</div><div>        for(int i = 1; i&lt;= len; i++){</div><div>            if( palindrome(s.substring(0,i)) ){</div><div>                // System.out.print(&quot;     ddddd &quot;+ s.substring(0,i));</div><div>                subList.add(s.substring(0,i));</div><div>                helper(list, subList, s.substring(i));</div><div>                subList.remove(subList.size()-1);</div><div>            } </div><div>        }</div><div>        return list;</div><div>    }</div><div><br/></div><div>    public boolean palindrome(String s){</div><div>        int l = s.length()-1;</div><div>        int r = 0;</div><div>        while(r &lt; l){</div><div>            if(s.charAt(r) != s.charAt(l)){</div><div>                return false;</div><div>            }</div><div>            r++;</div><div>            l--;</div><div>        }</div><div>        return true;</div><div>    }</div><div>}</div></div><div><br/></div><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><div><br/></div><div><br/></div><div><br/></div></div></div></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>137. Single Number II</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/single-number-ii/description/">https://leetcode.com/problems/single-number-ii/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Given an array of integers, every element appears <i style="box-sizing: border-box;">three</i> times except for one, which appears exactly once. Find that single one.</p><div style="box-sizing: border-box; margin: 0px 0px 10px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><b style="box-sizing: border-box; font-weight: 700;"><span style="font-size: 14px;">Note:</span></b></span></span><div><span style="color: rgb(51, 51, 51);"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 14px;">Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory?</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 14px;">解法（此类问题通解）：从位的角度来看待问题，对数组中所有数的相同的值（非零即一）相加得sum，由于多次出现的数都出现三次，因此sum %= 3 后的sum中将没有重复数的信息，只有single number 的信息。</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 14px;">图解</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></div><div><img src="148. Sort List [2]_files/微信图片_20180126200950.jpg" type="image/jpeg" style="height: auto;"/></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 14px;">代码：</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>class Solution {</div><div>    public int singleNumber(int[] nums) {</div><div><br/></div><div>        int ans = 0;</div><div>        for(int i = 0; i &lt; 32; i++){</div><div>            int num = 0;</div><div>            for(int j = 0; j &lt; nums.length; j++){</div><div>                num += (nums[j] &gt;&gt; i) &amp; 1;</div><div>            } </div><div>            ans |= (num%3) &lt;&lt; i;</div><div>        }</div><div>        return ans;</div><div>    }</div><div>}</div></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>117. Populating Next Right Pointers in Each Node II</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/populating-next-right-pointers-in-each-node-ii/description/">https://leetcode.com/problems/populating-next-right-pointers-in-each-node-ii/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div style="box-sizing: border-box; position: relative; min-height: 1px; padding-right: 15px; padding-left: 15px; float: left; width: 390px; left: 780px; text-align: right; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </div><div style="box-sizing: border-box; position: relative; min-height: 1px; padding-right: 15px; padding-left: 15px; float: left; width: 780px; right: 390px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div style="box-sizing: border-box; font-weight: 500; margin-top: 0px; margin-bottom: 10px; display: inline-block; margin-right: 0.5em;"><div><span style="font-size: 24px;"><span style="font-family: inherit;"><span style="color: inherit;">117. Populating Next Right Pointers in Each Node II</span></span></span></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Follow up for problem &quot;<i style="box-sizing: border-box;">Populating Next Right Pointers in Each Node</i>&quot;.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">What if the given tree could be any binary tree? Would your previous solution still work?</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><b style="box-sizing: border-box; font-weight: 700;">Note:</b></p><ul style="box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">You may only use constant extra space.</li></ul><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><div style="box-sizing: border-box; margin: 0px 0px 10px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">For example,</span></span></span><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">Given the following binary tree,</span></span></span></div><div style="box-sizing: border-box; margin-top: 20px; margin-bottom: 30px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;">
         1
       /  \
      2    3
     / \    \
    4   5    7
</pre><p style="box-sizing: border-box; margin: 0px 0px 10px;"></p><p style="box-sizing: border-box; margin: 0px 0px 10px;">After calling your function, the tree should look like:<br style="box-sizing: border-box;"/></p><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;">         1 -&gt; NULL<br/>
       /  \<br/>
      2 -&gt; 3 -&gt; NULL<br/>
     / \    \
<div>    4-&gt; 5 -&gt; 7 -&gt; NULL</div></div><p style="box-sizing: border-box; margin: 0px 0px 10px;"></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"></p></div><div>主体思想：采用广度优先的思想，一层一层的完成。</div><div>解法一，使用队列，将将每一层的事先节点存入队列。再一边将当前队列中的节点的子节点存入队列，并且将当前节点指向队列中的当前层的下一节点。</div><div>代码：</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>/**</div><div> * Definition for binary tree with next pointer.</div><div> * public class TreeLinkNode {</div><div> *     int val;</div><div> *     TreeLinkNode left, right, next;</div><div> *     TreeLinkNode(int x) { val = x; }</div><div> * }</div><div> */</div><div>public class Solution {</div><div>    public void connect(TreeLinkNode root) {</div><div>        if(root == null )return;</div><div>        LinkedList&lt;TreeLinkNode&gt; queue = new LinkedList&lt;TreeLinkNode&gt;();</div><div>        TreeLinkNode point = root;</div><div>        queue.add(point);</div><div>        int len;</div><div>        while(!queue.isEmpty()){</div><div>            len = queue.size();</div><div>            point = queue.remove();</div><div>            for(int i = 0; i &lt; len; i++){</div><div>                if(point.left != null)</div><div>                    queue.add(point.left);</div><div>                if(point.right != null)</div><div>                    queue.add(point.right);</div><div>                if(i == len-1){</div><div>                    point.next = null;</div><div>                }else{</div><div>                    point.next = queue.getFirst();</div><div>                    point = queue.remove();</div><div>                }</div><div>            }</div><div>        }</div><div>    }</div><div>}</div></div><div><br/></div><div>解法二：解法一由于使用了队列，频繁的进出队列会导致算法效率降低，所以在解法二中，使用current指针指向next操作的那一层，root指针遍历current层的上一层，point指针在current层中便利，以便next操作。由于current.next指向当前next操作层的第一位，所以在root遍历完成后，可以直接将root定位到current.next处，即为下一层的操作时，root的起始位置。再将current.next设为null；point = current；</div><div>代码：</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>/**</div><div> * Definition for binary tree with next pointer.</div><div> * public class TreeLinkNode {</div><div> *     int val;</div><div> *     TreeLinkNode left, right, next;</div><div> *     TreeLinkNode(int x) { val = x; }</div><div> * }</div><div> */</div><div>public class Solution {</div><div>    public void connect(TreeLinkNode root) {</div><div>        TreeLinkNode current = new TreeLinkNode(0);</div><div>        TreeLinkNode point = current;</div><div><br/></div><div>        while(root != null){</div><div>            if(root.left != null){</div><div>                point.next = root.left;</div><div>                point = point.next;</div><div>            }</div><div>            if(root.right != null){</div><div>                point.next = root.right;</div><div>                point = point.next;</div><div>            }</div><div>            root = root.next;</div><div>            if(root == null){</div><div>                root = current.next;</div><div>                point  = current;</div><div>                current.next = null;</div><div>            }</div><div>        }</div><div><br/></div><div><br/></div><div>    }</div><div>}</div></div><div><br/></div><div><font color="#333333" face="Helvetica Neue, Helvetica, Arial, sans-serif"><span style="font-size: 14px;">注：如果二叉树是满二叉树，则不需要使用current和point指针，只需要root指针遍历，通过root操作子节点，eg. root.left.next = root.right.同一父节点的左节点指向右节点。root.right.next = root.next.left,兄弟节点之间的指向。</span></font></div><div><font color="#333333" face="Helvetica Neue, Helvetica, Arial, sans-serif"><span style="font-size: 14px;">代码：</span></font></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>/**</div><div> * Definition for binary tree with next pointer.</div><div> * public class TreeLinkNode {</div><div> *     int val;</div><div> *     TreeLinkNode left, right, next;</div><div> *     TreeLinkNode(int x) { val = x; }</div><div> * }</div><div> */</div><div>public class Solution {</div><div>    public void connect(TreeLinkNode root) {</div><div>        if(root == null )return;</div><div>        TreeLinkNode curLevel = root;</div><div>        TreeLinkNode cur = null;</div><div>        while(curLevel.left != null){</div><div>            cur = curLevel;</div><div>            cur.left.next = cur.right;</div><div>            while(cur.next != null){</div><div>                cur.right.next = cur.next.left;</div><div>                cur = cur.next;</div><div>                cur.left.next = cur.right;</div><div>            }</div><div>            curLevel = curLevel.left;</div><div>        }</div><div>    }</div><div>}</div></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div></div></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>191. Number of 1 Bits</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/number-of-1-bits/description/">https://leetcode.com/problems/number-of-1-bits/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 24px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 500; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">191. Number of 1 Bits</span></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Write a function that takes an unsigned integer and returns the number of ’1' bits it has (also known as the <a href="https://en.wikipedia.org/wiki/Hamming_weight" style="box-sizing: border-box; background-color: transparent; color: rgb(0, 136, 204); text-decoration: none;">Hamming weight</a>).</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">For example, the 32-bit integer ’11' has binary representation <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">00000000000000000000000000001011</code>, so the function should return 3.</p><div style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><b style="box-sizing: border-box; font-weight: 700;">Credits:</b><div>Special thanks to <a href="https://oj.leetcode.com/discuss/user/ts" style="box-sizing: border-box; background-color: transparent; color: rgb(0, 136, 204); text-decoration: none;">@ts</a> for adding this problem and creating all test cases.</div><div><br/></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>public class Solution {</div><div>    // you need to treat n as an unsigned value</div><div>    public int hammingWeight(int n) {</div><div>        int num = 0;</div><div>        int m = 0;</div><div>        while(m &lt; 32){</div><div>            num += n &amp; 1; //与1做与操作，如果n的最右位为1，则n&amp;1结果为1；</div><div>            n = n &gt;&gt;&gt; 1; //注意&gt;&gt;&gt;是无符号右移；</div><div>            m++;</div><div>        }</div><div>        return num;</div><div>    }</div><div>}</div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>public class Solution {</div><div>    // you need to treat n as an unsigned value</div><div>    public int hammingWeight(int n) {</div><div>        int num = 0;</div><div>        while(n !=0){</div><div>            n &amp;= n-1;//n&amp;(n-1)表示消去n中从右向左的第一个1</div><div>            num++;</div><div>        }</div><div>        return num;</div><div>    }</div><div>}</div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>166. Fraction to Recurring Decimal</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/fraction-to-recurring-decimal/description/">https://leetcode.com/problems/fraction-to-recurring-decimal/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><div><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 24px; font-weight: bold; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">166. Fraction to Recurring Decimal</span></div><div><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Given two integers representing the numerator and denominator of a fraction, return the fraction in string format.</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">If the fractional part is repeating, enclose the repeating part in parentheses.</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">For example,</span></div><ul style="box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box;">Given numerator = 1, denominator = 2, return &quot;0.5&quot;.</li><li style="box-sizing: border-box;">Given numerator = 2, denominator = 1, return &quot;2&quot;.</li><li style="box-sizing: border-box;">Given numerator = 2, denominator = 3, return &quot;0.(6)&quot;.</li></ul><div>解法：注意计算过程中可能会有int越界，所以要将计算类型转换为long型。</div><div>1.当分子为0，直接返回0；</div><div>2.处理符号，如果结果为负数，则在字符串前面添加“-”符号，然后将其转换为正数操作；</div><div>3.在处理小数的时候，需要记录每个除数。使用map记录，并记录位置，方便在处理循环小数的时候，增加括号。</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">class Solution {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public String fractionToDecimal(int numerator, int denominator) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        if(numerator == 0) return &quot;0&quot;;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        StringBuilder num = new StringBuilder();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        Map&lt;Long,Integer&gt; repeat = new HashMap&lt;Long,Integer&gt;();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        num.append(((numerator &gt; 0) ^ (denominator &gt; 0)) ? &quot;-&quot; : &quot;&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        long num1 = Math.abs((long)numerator);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        long num2 = Math.abs((long)denominator);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        num.append(num1/num2);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        num1 %=num2;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        if(num1 != 0)num.append(&quot;.&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        while(num1 != 0){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            num1 *= 10;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            if(repeat.containsKey(num1)){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                int index = repeat.get(num1);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                num.insert(index, &quot;(&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                num.append(&quot;)&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                break;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            }else {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                repeat.put(num1,num.length());</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            num.append(num1/num2);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            num1 %= num2;    </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        return num.toString();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div><br/></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>172. Factorial Trailing Zeroes</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/factorial-trailing-zeroes/description/">https://leetcode.com/problems/factorial-trailing-zeroes/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 24px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 500; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">172. Factorial Trailing Zeroes</span></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Given an integer <i style="box-sizing: border-box;">n</i>, return the number of trailing zeroes in <i style="box-sizing: border-box;">n</i>!.</p><div style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><b style="box-sizing: border-box; font-weight: 700;">Note: </b>Your solution should be in logarithmic time complexity.</div><div><br/></div><div><br/></div><div>解法：只需要计算有多少个数能被5整除。</div><div><br/></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>class Solution {</div><div>    public int trailingZeroes(int n) {</div><div>        int count = 0;</div><div>        while(n &gt;= 5){</div><div>            count += n/5;</div><div>            n /=5;</div><div>        }</div><div>        return count;</div><div>    }</div><div>}</div></div><div><br/></div></div></div><div><span style="font-size: 24px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></span></div><div><span style="font-size: 24px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>96. Unique Binary Search Trees</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/unique-binary-search-trees/description/">https://leetcode.com/problems/unique-binary-search-trees/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 24px; font-weight: bold; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">96. Unique Binary Search Trees</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box;"><br/></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box;">Given</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-style: italic;">n</span><span style="box-sizing: border-box;">, how many structurally unique</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-weight: bold;">BST's</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box;">(binary search trees) that store values 1...</span><span style="box-sizing: border-box; font-style: italic;">n</span><span style="box-sizing: border-box;">?</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><div>For example,</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true;">Given</span><span style="-en-paragraph: true;"> </span><span style="-en-paragraph: true; font-style: italic; box-sizing: border-box;">n</span><span style="-en-paragraph: true;"> </span><span style="-en-paragraph: true;">= 3, there are a total of 5 unique BST's.</span></div></div><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"><div>1 3 3 2 1</div><div>\ / / / \ \</div><div>3 2 1 1 3 2</div><div>/ / \ \</div><div>2 1 2 3</div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"></div><div style="box-sizing: border-box; margin-top: 15px; font-size: 0.9em; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></div><div><br/></div><div><a href="https://discuss.leetcode.com/topic/8398/dp-solution-in-6-lines-with-explanation-f-i-n-g-i-1-g-n-i" style="box-sizing: border-box; border-bottom: 1px solid rgb(221, 221, 221); border-top-left-radius: 5px; border-top-right-radius: 5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border-top-color: rgb(221, 221, 221); border-right-color: rgb(221, 221, 221); border-left-color: rgb(221, 221, 221); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 18px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-weight: bold; line-height: 1.1;">DP Solution in 6 lines with explanation. F(i, n) = G(i-1) * G(n-i)</a></div><div style="box-sizing: border-box;"><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box;">The problem can be solved in a dynamic programming way. I’ll explain the intuition and formulas in the following.</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box;">Given a sequence 1…n, to construct a Binary Search Tree (BST) out of the sequence, we could enumerate each number i in the sequence, and use the number as the root, naturally, the subsequence 1…(i-1) on its left side would lay on the left branch of the root, and similarly the right subsequence (i+1)…n lay on the right branch of the root. We then can construct the subtree from the subsequence recursively. Through the above approach, we could ensure that the BST that we construct are all unique, since they have unique roots.</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box;">The problem is to calculate the number of unique BST. To do so, we need to define two functions:</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">G(n)</span><span style="box-sizing: border-box;">: the number of unique BST for a sequence of length n.</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">F(i, n), 1 &lt;= i &lt;= n</span><span style="box-sizing: border-box;">: the number of unique BST, where the number i is the root of BST, and the sequence ranges from 1 to n.</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box;">As one can see,</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">G(n)</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box;">is the actual function we need to calculate in order to solve the problem. And</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">G(n)</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box;">can be derived from</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">F(i, n)</span><span style="box-sizing: border-box;">, which at the end, would recursively refer to</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">G(n)</span><span style="box-sizing: border-box;">.</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><div>First of all, given the above definitions, we can see that the total number of unique BST <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">G(n)</span>, is the sum of BST <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">F(i)</span> using each number i as a root.</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-style: italic; box-sizing: border-box;">i.e.</span></div></div><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"><div style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 0.5em; color: rgb(68, 68, 68); background-color: rgb(240, 240, 240); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; overflow-x: auto; background-position: initial initial; background-repeat: initial initial;"><div>G(<span style="box-sizing: border-box; color: rgb(57, 115, 0);">n</span>) = F(<span style="box-sizing: border-box; color: rgb(136, 0, 0);">1</span>, <span style="box-sizing: border-box; color: rgb(57, 115, 0);">n</span>) + F(<span style="box-sizing: border-box; color: rgb(136, 0, 0);">2</span>, <span style="box-sizing: border-box; color: rgb(57, 115, 0);">n</span>) + ... + F(<span style="box-sizing: border-box; color: rgb(57, 115, 0);">n</span>, <span style="box-sizing: border-box; color: rgb(57, 115, 0);">n</span>).</div></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><div>Particularly, the bottom cases, there is only one combination to construct a BST out of a sequence of length 1 (only a root) or 0 (empty tree).</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-style: italic; box-sizing: border-box;">i.e.</span></div></div><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"><div style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 0.5em; color: rgb(68, 68, 68); background-color: rgb(240, 240, 240); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; overflow-x: auto; background-position: initial initial; background-repeat: initial initial;"><div>G(<span style="box-sizing: border-box; color: rgb(136, 0, 0);">0</span>)=<span style="box-sizing: border-box; color: rgb(136, 0, 0);">1</span>, G(<span style="box-sizing: border-box; color: rgb(136, 0, 0);">1</span>)=<span style="box-sizing: border-box; color: rgb(136, 0, 0);">1.</span></div></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box;">Given a sequence 1…n, we pick a number i out of the sequence as the root, then the number of unique BST with the specified root</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">F(i)</span><span style="box-sizing: border-box;">, is the cartesian product of the number of BST for its left and right subtrees. For example,</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">F(3, 7)</span><span style="box-sizing: border-box;">: the number of unique BST tree with number 3 as its root. To construct an unique BST out of the entire sequence [1, 2, 3, 4, 5, 6, 7] with 3 as the root, which is to say, we need to construct an unique BST out of its left subsequence [1, 2] and another BST out of the right subsequence [4, 5, 6, 7], and then combine them together (</span><span style="box-sizing: border-box; font-style: italic;">i.e.</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box;">cartesian product). The tricky part is that we could consider the number of unique BST out of sequence [1,2] as</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">G(2)</span><span style="box-sizing: border-box;">, and the number of of unique BST out of sequence [4, 5, 6, 7] as</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">G(4)</span><span style="box-sizing: border-box;">. Therefore,</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">F(3,7) = G(2) * G(4)</span><span style="box-sizing: border-box;">.</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; font-style: italic;">i.e.</span></div><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"><div style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 0.5em; color: rgb(68, 68, 68); background-color: rgb(240, 240, 240); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; overflow-x: auto; background-position: initial initial; background-repeat: initial initial;"><div>F(<span style="box-sizing: border-box; font-weight: bold;">i</span>, n) = G(<span style="box-sizing: border-box; font-weight: bold;">i-1</span>) * G(<span style="box-sizing: border-box; font-weight: bold;">n-i</span>) <span style="box-sizing: border-box; color: rgb(136, 0, 0);">1</span> &lt;= i &lt;= n</div></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box;">Combining the above two formulas, we obtain the recursive formula for</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">G(n)</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-style: italic;">i.e.</span></div><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"><div style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 0.5em; color: rgb(68, 68, 68); background-color: rgb(240, 240, 240); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; overflow-x: auto; background-position: initial initial; background-repeat: initial initial;"><div>G<span style="box-sizing: border-box; color: rgb(136, 136, 136);">(n)</span> = G<span style="box-sizing: border-box; color: rgb(136, 136, 136);">(0)</span> * G<span style="box-sizing: border-box; color: rgb(136, 136, 136);">(n-1)</span> + G<span style="box-sizing: border-box; color: rgb(136, 136, 136);">(1)</span> * G<span style="box-sizing: border-box; color: rgb(136, 136, 136);">(n-2)</span> + … + G<span style="box-sizing: border-box; color: rgb(136, 136, 136);">(n-1)</span> * G<span style="box-sizing: border-box; color: rgb(136, 136, 136);">(0)</span></div></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box;">In terms of calculation, we need to start with the lower number, since the value of</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">G(n)</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box;">depends on the values of</span><span style="box-sizing: border-box;"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">G(0) … G(n-1)</span><span style="box-sizing: border-box;">.</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box;"><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">With the above explanation and formulas, here is the implementation in Java.</span><br/></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">class Solution {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public int numTrees(int n) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        int[] G = new int[n+1];</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        G[0] = G[1] = 1;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        for(int i = 2; i &lt;= n; i++){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            for(int j = 1; j &lt;= i; j++){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                G[i] += G[j-1] * G[i-j];</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        return G[n];</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box;"><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></span></span>注意：这道题不难，主要在于我们只需要考虑有个k节点的树有多少中可能，不需要我们考虑树的内容。比如:左子数节点为（1，2，3）和右子树节点为（4，5，6），由于我们不需要准确的知道左右子树具体长什么样，只需要知道左右子树的可能排列情况，所有左右子树可以看成是一样的问题，都是求有三节点的子树的可能排列数量。</div></div><div><br/></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>Search in Rotated Sorted Array II</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/search-in-rotated-sorted-array-ii/description/">https://leetcode.com/problems/search-in-rotated-sorted-array-ii/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 11pt;">Search in Rotated Sorted Array II</font></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">Suppose an array sorted in ascending order is rotated at some pivot unknown to you beforehand.</font></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 11pt;"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);">(i.e.,</span><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;">0 1 2 4 5 6 7</span><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);">might become</span><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;">4 5 6 7 0 1 2</span><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);">).</span></font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">Write a function to determine if a given target is in the array.</font></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">The array may contain duplicates.</font></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: Helvetica Neue; font-size: 18pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: Helvetica Neue; font-size: 18pt; color: rgb(51, 51, 51);"><br/></span></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">解法：由于这题中有可能有重复的出现，所以在当num[mid] 等于num[left] 或者num[right]时，不能认为mid就是left或者right了。所以这种情况要单独拿出来讨论。</font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">与不重复的情形的不同就在于<span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt;">当num[mid] 等于num[left] 或者num[right]时，要单独处理。</span></font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 11pt;"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt;"><br/></span></font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 11pt;"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt;"><br/></span></font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 11pt;"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt;">详细解法：由于数组是混乱的，将数组nums分为A,B,<span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt;">A中所有元素大于B中所有元素。</span>所以要先确定mid在A中还是在B中。</span></font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 11pt;"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt;"><span>    <span>    <span>    <span>    情形1：target == nums[mid],</span></span></span></span><br/></span></font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 11pt;"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt;"><span>判断mid在A中还是在B中时，使用<span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt; line-height: 23px;">num[mid] &gt;num[left] 或者</span><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt; line-height: 23px;">num[mid]</span> <span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt; line-height: 23px;">&lt;num[right]，注意没有“=”；</span></span></span></font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 11pt;"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt;"><span>    <span>    <span>    <span>    </span></span></span></span>情形2 ：在A中，则如果target&gt;=A[i]（i为左起的索搜范围）&amp;&amp;target&lt;nums[mid]，则 target在[i,mid-1]的范围中，所以有j=mid-1；否则 i= mid+1；</span></font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 11pt;"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt;"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt;"><span>    <span>    <span>    <span>    </span></span></span></span>情形3 ：在B中，则如果target&lt;=B[j]（j为右止的索搜范围）&amp;&amp;target&gt;nums[mid]，则 target在[mid+1,j]的范围中，所以有i=mid+1；否则 j= mid-1；</span><br/></span></font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font size="4"><span style="line-height: 23px;">注意由于数组中重复，所以在判断mid位于那段中时（A or B）,不能使用等于，</span></font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 18px;"><span style="line-height: 23px;"><span>    <span>    <span>    <span>    情形4 ：nums[mid] == A[i] or B[j] 时，直接在搜索范围中去掉<span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 18px; line-height: 23px;">A[i] or B[j]。</span></span></span></span></span><br/></span></font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><font style="font-size: 18px;"><span style="line-height: 23px;"><span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 18px; line-height: 23px;"><br/></span></span></font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51);"><span style="font-size: 18px; line-height: 23px;">如果时不重复的数组，则直接在判断mid是A或者B时，使用<span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt;">num[mid] &gt;=num[left] 或者<span style="box-sizing: border-box; font-family: 'Helvetica Neue'; color: rgb(51, 51, 51); font-size: 12pt; line-height: 23px;">num[mid]</span> &lt;=num[right],就没有情形4；</span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">class Solution {</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">    public boolean search(int[] nums, int target) {</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">        if(nums.length == 0) return false;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">        int j = nums.length-1;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">        int i = 0;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">        int point = 0;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">        while(i &lt;= j){</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">            point = (i+j)/2;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">            if(target == nums[point])return true;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">            </font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">            if(nums[point] &gt; nums[i] ){</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">                if( target &lt;  nums[point] &amp;&amp; target &gt;= nums[i]){</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">                    j = point - 1;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">                }else {</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">                    i = point + 1;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">                }</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">            }else if(nums[point] &lt; nums[j]){</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">                if( target &gt;  nums[point] &amp;&amp; target &lt;= nums[j]){</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">                    i = point + 1;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">                }else {</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">                    j = point - 1;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">                }</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">            }else if(nums[point] == nums[i] ) {</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">                i++;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">            }else{</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">                j--;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">            }</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">        }</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">        return false;</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">        </font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">    }</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 11pt;">}</font></span></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: Helvetica Neue; font-size: 18pt; color: rgb(51, 51, 51);"> <br/></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-family: Helvetica Neue; font-size: 18pt; color: rgb(51, 51, 51);"></div><div style="box-sizing: border-box; margin-top: 15px; font-size: 0.9em; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></div><div><br style="font-family: Helvetica Neue; font-size: 18pt; color: rgb(51, 51, 51);"/></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>Remove Duplicates from Sorted Array II</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/remove-duplicates-from-sorted-array-ii/description/">https://leetcode.com/problems/remove-duplicates-from-sorted-array-ii/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><font style="font-size: 11pt;">Remove Duplicates from Sorted Array II</font></div><div><font style="font-size: 11pt;">Follow up for &quot;Remove Duplicates&quot;:</font></div><div style="margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 11pt;">What if duplicates are allowed at most <span style="box-sizing: border-box; font-style: italic;">twice</span>?</font></div><div style="box-sizing: border-box; margin: 0px 0px 10px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><font style="font-size: 11pt;">For example,</font></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 11pt;"><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">Given sorted array</span><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> </span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: italic;">nums</span><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> </span><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">=</span><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> </span><span style="box-sizing: border-box; background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: rgb(199, 37, 78); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">[1,1,1,2,2,3]</span><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">,</span></font></div></div><div><font style="font-size: 11pt;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">Your function should return length =</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: rgb(199, 37, 78); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">5</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">, with the first five elements of</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: italic;">nums</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">being</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: rgb(199, 37, 78); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">1</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">,</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: rgb(199, 37, 78); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">1</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">,</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: rgb(199, 37, 78); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">2</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">,</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: rgb(199, 37, 78); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">2</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">and</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: rgb(199, 37, 78); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">3</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">. It doesn't matter what you leave beyond the new length.</span></font></div><div><br/></div><div><br/></div><div style="orphans: 2; widows: 2;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">解法：主要思想在重构的数组里面每种数字不能出现超过2次，所以有</span><span style="font-size: 15px;"><span style="color: rgb(51, 51, 51); font-size: 15px; line-height: 20px; font-family: 'Helvetica Neue';">nums[i] &gt; nums[length-2]满足时，可以将[i]写入[length]中。</span></span></div><div style="orphans: 2; widows: 2;"><span style="font-size: 15px;"><span style="color: rgb(51, 51, 51); font-size: 15px; line-height: 20px; font-family: 'Helvetica Neue';">代码：</span></span></div><div style="orphans: 2; widows: 2;"><br/></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">class Solution {</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    public int removeDuplicates(int[] nums) {</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        int length = 0;</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        for(int i : nums){</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">            if(length &lt; 2 || i &gt; nums[length-2]){</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                nums[length++] = i;</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">            }</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        }</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        return length;</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    }</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">}</span></div></div><div style="orphans: 2; widows: 2;"><div><br/></div><div><br/></div></div><div><br/></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>Sqrt(x)</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/sqrtx/description/">https://leetcode.com/problems/sqrtx/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 24px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Sqrt(x)</span></div><div><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Implement</span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"> </span><span style="box-sizing: border-box; color: rgb(199, 37, 78); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12.6px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;">int sqrt(int x)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">.</span></div><div><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Compute and return the square root of</span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-style: italic;">x</span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">.</span></div><div><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></span></div><div><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">代码：</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">class Solution {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public int mySqrt(int x) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">         long r = x;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    while (r*r &gt; x)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        r = (r + x/r) / 2;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    return (int) r;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div>root总在r与x/r之间，除2主要是使用二分法加快搜索</div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>40. Combination Sum II</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/combination-sum-ii/description/">https://leetcode.com/problems/combination-sum-ii/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 24px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 500; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">40. Combination Sum II</span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Given a collection of candidate numbers (<b style="box-sizing: border-box; font-weight: 700;"><i style="box-sizing: border-box;">C</i></b>) and a target number (<b style="box-sizing: border-box; font-weight: 700;"><i style="box-sizing: border-box;">T</i></b>), find all unique combinations in <b style="box-sizing: border-box; font-weight: 700;"><i style="box-sizing: border-box;">C</i></b> where the candidate numbers sums to <b style="box-sizing: border-box; font-weight: 700;"><i style="box-sizing: border-box;">T</i></b>.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Each number in <b style="box-sizing: border-box; font-weight: 700;"><i style="box-sizing: border-box;">C</i></b> may only be used <b style="box-sizing: border-box; font-weight: 700;">once</b> in the combination.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><b style="box-sizing: border-box; font-weight: 700;">Note:</b><br style="box-sizing: border-box;"/></p><ul style="box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">All numbers (including target) will be positive integers.</li><li style="box-sizing: border-box;">The solution set must not contain duplicate combinations.</li></ul><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">For example, given candidate set <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">[10, 1, 2, 7, 6, 1, 5]</code> and target <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">8</code>, <br style="box-sizing: border-box;"/>
A solution set is: <br style="box-sizing: border-box;"/></p><div style="box-sizing: border-box; overflow: auto; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">[<br/>
  [1, 7],<br/>
  [1, 2, 5],<br/>
  [2, 6],<br/>
  [1, 1, 6]</span><div><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">]</span></div></div></div></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 13px;"><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><br/></span></span></span></span></span></div><div>解决方法：</div><div>贪心法，每一步将当前的没有试过的值得最大值放入sublist，sublist存放每一个可能的结果。</div><div>     每次都从后面可遍历的最大的数向最小的数开始遍历，假设当前位置数记为c，</div><div>               如果c&lt;=target:</div><div>                    那么将c最为存入sublist，target= target-c，下一次递归的开始位置为c的位置；调用递归，</div><div><br/></div><div>             首先要保证最后不重复，由于同一个位置的数字不可以在一个结果中重复出现 ，只要下一次递归遍历的位置为当前递归的位置左移一个，就能保证最后结果不重复；</div><div>             如果在同一个递归层次中出现相同的数，则最后的结果必定相同，所以在循环中重复出现的数只处理一次：</div><div>             </div><div>注意：由于sublist所有递归分支公用一个sublist，所以需要对sublist不停的处理。当在当前sublist满足结果后，需要新建一个list来存sublist中的值；</div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 13px;"><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><br/></span></span></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 13px;"><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><br/></span></span></span></span></span></div><div>代码解析：</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>      public static List&lt;List&lt;Integer&gt;&gt; combinationSum2(int[] candidates, int target) {</div><div><br/></div><div>            Arrays.sort(candidates);</div><div>            List&lt;List&lt;Integer&gt;&gt; list = new ArrayList&lt;List&lt;Integer&gt;&gt;();</div><div>            helper(candidates,target, candidates.length-1, new ArrayList&lt;Integer&gt;(), list);</div><div>            return list;</div><div><br/></div><div>      }</div><div><br/></div><div>      public static List&lt;List&lt;Integer&gt;&gt; helper(int[] candidates,int target, int position, List&lt;Integer&gt; sublist, List&lt;List&lt;Integer&gt;&gt; list) {</div><div>            if(target == 0){</div><div>                  list.add(new ArrayList&lt;Integer&gt;(sublist));</div><div>                  return list;</div><div>            }</div><div>            for(int i = position; i &gt;= 0; i--){</div><div>                  if(i &gt; 0 &amp;&amp; candidates[i-1] == candidates[i])continue;</div><div><br/></div><div>                  if(candidates[i] &lt;= target){</div><div>                        sublist.add(candidates[i]);</div><div>                        helper(candidates,target - candidates[i], i-1, sublist, list);</div><div>                        sublist.remove(sublist.size()-1);</div><div>                  }</div><div><br/></div><div>            }</div><div>            return list;</div><div>      }</div></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 13px;"><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><br/></span></span></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 13px;"><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><br/></span></span></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 13px;"><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><br/></span></span></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 13px;"><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><br/></span></span></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 13px;"><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><br/></span></span></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="font-size: 13px;"><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><br/></span></span></span></span></span></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>39. Combination Sum</h1><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="font-size: 24px;"><span style="font-family: inherit;"><span style="color: inherit;">39. Combination Sum</span></span></span></div><div style="box-sizing: border-box; margin-top: 20px; margin-bottom: 30px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><p style="box-sizing: border-box; margin: 0px 0px 10px;">Given a <b style="box-sizing: border-box; font-weight: 700;">set</b> of candidate numbers (<b style="box-sizing: border-box; font-weight: 700;"><i style="box-sizing: border-box;">C</i></b>) <b style="box-sizing: border-box; font-weight: 700;">(without duplicates)</b> and a target number (<b style="box-sizing: border-box; font-weight: 700;"><i style="box-sizing: border-box;">T</i></b>), find all unique combinations in <b style="box-sizing: border-box; font-weight: 700;"><i style="box-sizing: border-box;">C</i></b> where the candidate numbers sums to <b style="box-sizing: border-box; font-weight: 700;"><i style="box-sizing: border-box;">T</i></b>.</p><p style="box-sizing: border-box; margin: 0px 0px 10px;">The <b style="box-sizing: border-box; font-weight: 700;">same</b> repeated number may be chosen from <b style="box-sizing: border-box; font-weight: 700;"><i style="box-sizing: border-box;">C</i></b> unlimited number of times.</p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><b style="box-sizing: border-box; font-weight: 700;">Note:</b><br style="box-sizing: border-box;"/></p><ul style="box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;"><li style="box-sizing: border-box;">All numbers (including target) will be positive integers.</li><li style="box-sizing: border-box;">The solution set must not contain duplicate combinations.</li></ul><p style="box-sizing: border-box; margin: 0px 0px 10px;"></p><p style="box-sizing: border-box; margin: 0px 0px 10px;">For example, given candidate set <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">[2, 3, 6, 7]</code> and target <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">7</code>, <br style="box-sizing: border-box;"/>
A solution set is: <br style="box-sizing: border-box;"/></p><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;">[<br/>
  [7],<br/>
  [2, 2, 3]
<div>]</div></div><p style="box-sizing: border-box; margin: 0px 0px 10px;"></p></div><div>解决方法：</div><div>贪心法，每一步将当前的没有试过的值得最大值放入sublist，sublist存放每一个可能的结果。</div><div>     每次都从后面可遍历的最大的数向最小的数开始遍历，假设当前位置数记为c，</div><div>               如果c&lt;=target:</div><div>                    那么将c最为存入sublist，target= target-c，下一次递归的开始位置为c的位置；调用递归，</div><div><br/></div><div>             首先要保证最后不重复，由于同一个位置的数字可以在一个结果中重复出现，只要下一次递归遍历的位置不右于当前递归的位置，就能保证最后结果不重复；</div><div>             </div><div>注意：由于sublist所有递归分支公用一个sublist，所以需要对sublist不停的处理。当在当前sublist满足结果后，需要新建一个list来存sublist中的值；</div><div><br/></div><div><br/></div><div>代码解析：</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>public static List&lt;List&lt;Integer&gt;&gt; combinationSum(int[] candidates, int target) {</div><div>            List&lt;List&lt;Integer&gt;&gt; list = new ArrayList&lt;List&lt;Integer&gt;&gt;();</div><div>            helper(candidates,target, candidates.length-1, new ArrayList&lt;Integer&gt;(), list);</div><div>            return list;</div><div><br/></div><div>      }</div><div><br/></div><div>      public static List&lt;List&lt;Integer&gt;&gt; helper(int[] candidates,int target, int position, List&lt;Integer&gt; sublist, List&lt;List&lt;Integer&gt;&gt; list) {</div><div>            if(target == 0){</div><div>                  list.add(new ArrayList&lt;Integer&gt;(sublist));</div><div>                  return list;</div><div>            }</div><div>            for(int i = position; i &gt;= 0; i--){</div><div><br/></div><div>                  if(candidates[i] &lt;= target){</div><div>                        sublist.add(candidates[i]);</div><div>                        helper(candidates,target - candidates[i], i, sublist, list);</div><div>                        sublist.remove(sublist.size()-1);</div><div>                  }</div><div>            }</div><div>            return list;</div><div>      }</div></div><div><br/></div><div><br/></div><div><br/></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>Median of Two Sorted Arrays</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/median-of-two-sorted-arrays/description/">https://leetcode.com/problems/median-of-two-sorted-arrays/description/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 24px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 500; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;"> Median of Two Sorted Arrays</span></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">There are two sorted arrays <b style="box-sizing: border-box; font-weight: 700;">nums1</b> and <b style="box-sizing: border-box; font-weight: 700;">nums2</b> of size m and n respectively.</p><div style="box-sizing: border-box; margin: 0px 0px 10px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">Find the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)).</span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><b style="box-sizing: border-box; font-weight: 700;">Example 1:</b><br style="box-sizing: border-box;"/></p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">
nums1 = [1, 3]
nums2 = [2]

The median is 2.0
</pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><b style="box-sizing: border-box; font-weight: 700;">Example 2:</b><br style="box-sizing: border-box;"/></p><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">nums1 = [1, 2]<br/>
nums2 = [3, 4]<br/><br/><div>The median is (2 + 3)/2 = 2.5</div></div></div><div><br/></div><div>解法一： 直接将nums1和nums2合并，由于两个数组自身已经有了顺序，所以只需要合并到（m+n）/2即可；</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>/**********************时间复杂度为O(M+N),直接将两个数组合并,可以直接找出第k小的数*********************************/</div><div>      public static double findMedianSortedArrays(int[] nums1, int[] nums2) {</div><div>            int m = nums1.length, n = nums2.length;</div><div>            int[] num = new int[m+n];</div><div>            int i = 0;</div><div>            int j = 0;</div><div>            int p = 0;</div><div>            while (i &lt; m &amp;&amp; j &lt; n) {</div><div>                  if(nums1[i] &lt; nums2[j])</div><div>                        num[p++] = nums1[i++];</div><div>                  else num[p++] = nums2[j++];</div><div>            }</div><div>            if(i == m){</div><div>                  while (j &lt; n ) {</div><div>                        num[p++] = nums2[j++];</div><div>                  }</div><div>            }</div><div>            else {</div><div>                  while (i &lt; m ) {</div><div>                        num[p++] = nums1[i++];</div><div>                  }</div><div>            }</div><div>            int k = (m + n) / 2;</div><div>            if((m+n)%2 == 0){</div><div>                  return (num[k] + num[k-1])/2.0;</div><div>            }else {</div><div>                  return num[k];</div><div>            }</div><div>    }</div></div><div><br/></div><div><br/></div><div>解法二：解法一时间复杂度为O(M+N)，也是大家都能想到的简单解法。考虑本题实质其实就是一种查询。如果可以使用二分法查询，则整个问题的时间复杂度就将降低为O（LOG(M+N)），在单一数组中二分查询并不困难，本题就可以抽象为怎么在两个一维数组中进行二分查询。</div><div>考虑本题查找中位数，即在按大小排序后位于中间的数。</div><div>假设数组A长度为m，则有m+1种划分。i=m/2，则有：</div><div><br/></div><div>A[0], A[1]...    A[i-1]   |  A[i],A[i+1]......A[m-1]</div><div><br/></div><div>则左右的元素个数相等，或者左边比右边多一个元素（m为奇数），现在还有一个长度为n的数组B。则数组总长度为m+n，当假设数组B在 j 位置处被划分为两半，有：</div><div> A[0], A[1]...    A[i-1]   |  A[i],A[i+1]......A[m-1]</div><div> B[0], B[1]...     B[i-1]   |  B[i],B[i+1]......B[n-1]</div><div>如果我们能够确保**：</div><div>     1. 左右两边的元素个数相等，</div><div>     2. 左边的最大值小于右边最小值，</div><div>则我们就已经将数组{A，B}划分为了长度相等的两段。</div><div><br/></div><div>为了确保满足1.2条件，有：</div><div>  (1): i + j = m - i + n - j，i 取值范围为[0,m],采用二分法改变i的值。 我们需要将 j 设置为 j = (m+n+1)/2 - i;  注意：要保证 m &lt; n,  不然可能会出现 j &lt; 0的情形。</div><div>  (2): A[i-1] &lt; B[j] &amp;&amp; A[i] &gt; B[j-1]</div><div>由于条件1是初始化条件，所以在判断程序是否结束时只有三种情形：</div><div>1. A[i-1] &lt; B[j] &amp;&amp; A[i] &gt; B[j-1] 这个时候查找结束，中位数为max(A[i-1],B[j-1]),或者（max(A[i-1],B[j-1])+min(A[i],B[j])）/ 2.0</div><div>2. A[i-1] &gt; B[j], 这个时候说明i应该左移，设i=i-1；</div><div>3. A[i] &lt; B[j-1], 这个时候说明i应该右移，设i=i+1；</div><div><br/></div><div>现在考虑边界情形，即中位数只出现在一个数组中的时候，如果我们在遍历完A数组后都没能找到满足**1.2的i，这个时候i可能会等于m或者等于0；当i=m时，说明A数组全部都在左边的部分。反之则A数组都在右边的部分（B数组也一样）。也即是说如果出现了某个数组已经遍历完后就可以结束遍历。这是可以直接根据没有溢出的i或者j来确定中位值；</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>      /*********************时间复杂度为O(LOG(M+N))**********************/</div><div>      public static double findMedianSortedArrays(int[] nums1, int[] nums2) {</div><div>            int[] A = nums1.length &gt; nums2.length ? nums2 : nums1;</div><div>      int[] B = nums1.length &gt; nums2.length ? nums1 : nums2;</div><div>      int m = A.length;</div><div>      int n = B.length;</div><div>            int imin = 0;</div><div>            int imax = m;</div><div>            int half_len = ( n + m + 1 ) / 2;</div><div>            int i, j;</div><div>            int max_of_left = 0, min_of_right = 0;</div><div>            while (imin &lt;= imax) {</div><div>                  i = ( imin + imax ) / 2;</div><div>                  j = half_len - i;</div><div>                  if(i &lt; m &amp;&amp; A[i] &lt; B[j-1]){</div><div>                        imin = i + 1;</div><div>                  }else if (i &gt; 0 &amp;&amp; A[i-1] &gt; B[j]) {</div><div>                        imax = i - 1;</div><div>                  }else {</div><div>                        if(i == 0) max_of_left = B[j-1];</div><div>                        else if(j == 0) max_of_left = A[i-1];</div><div>                        else max_of_left = Math.max(A[i-1], B[j-1]);</div><div><br/></div><div>                        if(( m + n ) % 2 != 0) return max_of_left;</div><div><br/></div><div>                        if(i == m ) min_of_right = B[j];</div><div>                        else if ( j == n ) min_of_right = A[i];</div><div>                        else min_of_right = Math.min(A[i], B[j]);</div><div><br/></div><div>                        return (max_of_left + min_of_right) / 2.0;</div><div>                  }</div><div>            }</div><div>            return 0;</div><div>    }</div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>                                </div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>Combinations</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/combinations/tabs/description">https://leetcode.com/problems/combinations/tabs/description</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 24px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 500; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Combinations</span></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Given two integers <i style="box-sizing: border-box;">n</i> and <i style="box-sizing: border-box;">k</i>, return all possible combinations of <i style="box-sizing: border-box;">k</i> numbers out of 1 ... <i style="box-sizing: border-box;">n</i>.</p><div style="box-sizing: border-box; margin: 0px 0px 10px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">For example,</span></span></span><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">If <i style="box-sizing: border-box;">n</i> = 4 and <i style="box-sizing: border-box;">k</i> = 2, a solution is:</span></span></span></div><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">[<br/>
  [2,4],<br/>
  [3,4],<br/>
  [2,3],<br/>
  [1,2],<br/>
  [1,3],<br/>
  [1,4],
<div>]</div></div><div>解法：主要还是依靠递归回溯法解决；</div><div>          递归算法里面有五个参数，最终一个结果返回list，一个sublist中间单个结果，start，n，k。</div><div>          算法优化在于在递归式中循环的时候，循环范围为【start，n-k+1】</div><div>          由于在Java中函数传参时，函数内部可以改变对象，由于在次算法中是使用回溯法，因此可以只是用一中间变量list，但在完成一个组合后，必须new一个list，来添加：list.add(new ArrayList&lt;Integer&gt;(sublist));</div><div>          因为sublist中的值是会在之后的操作中改变为其他的中间，递归完毕后，sublist为空；</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>package com.tju.edu.Combinations;</div><div><br/></div><div>import java.util.ArrayList;</div><div>import java.util.List;</div><div><br/></div><div>public class Main {</div><div><br/></div><div>      public static void main(String[] args) {</div><div>            System.out.println(combine(11,2));</div><div>      }</div><div><br/></div><div>      public static List&lt;List&lt;Integer&gt;&gt; combine(int n, int k) {</div><div>            List&lt;List&lt;Integer&gt;&gt; list = new ArrayList&lt;List&lt;Integer&gt;&gt;();</div><div>            helper(list, new ArrayList&lt;Integer&gt;(), n,1,k);</div><div>            return list;</div><div>      }</div><div><br/></div><div>      public static void helper(List&lt;List&lt;Integer&gt;&gt; list,List&lt;Integer&gt; sublist, int n,int start,int k) {</div><div>            if(k==0) {</div><div>                  list.add(new ArrayList&lt;Integer&gt;(sublist));</div><div>                  return ;</div><div>            }</div><div>            for (int i = start; i &lt;= n- k + 1; i++) {</div><div>                  sublist.add(i);</div><div>                  helper(list,sublist, n,i+1, k-1);</div><div>                  sublist.remove(sublist.size()-1);</div><div>            }</div><div>            return ;</div><div>      }</div><div>}</div></div><div><br/></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>Unique Paths</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/unique-paths/#/description">https://leetcode.com/problems/unique-paths/#/description</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 24px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 500; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Unique Paths</span></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">A robot is located at the top-left corner of a <i style="box-sizing: border-box;">m</i> x <i style="box-sizing: border-box;">n</i> grid (marked 'Start' in the diagram below).</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">The robot can only move either down or right at any point in time. The robot is trying to reach the bottom-right corner of the grid (marked 'Finish' in the diagram below).</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">How many possible unique paths are there?</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><img src="148. Sort List [2]_files/Image [2].png" type="image/png" style="box-sizing: border-box; border: 0px; vertical-align: middle; height: auto;"/><br style="box-sizing: border-box;"/></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; font-size: 11px;">Above is a 3 x 7 grid. How many possible unique paths are there?</p><div style="box-sizing: border-box; margin: 0px 0px 10px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><b style="box-sizing: border-box; font-weight: 700;">Note:</b> <i style="box-sizing: border-box;">m</i> and <i style="box-sizing: border-box;">n</i> will be at most 100.</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div><hr/></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">解决</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">     由于在每一步只有向右或者向下的走法，而且在当m和n确定之后，走的步数也就确定了（m+n-2），且向下走m-1步，向右走n-1步；因此问题就被转换成了数学上的排列组合问题；</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">     </span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">     也就是说在m+n-2步里面，任意挑选出m-1步，求有多少种选择情况；</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">     </span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">     数学公式：</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">               假设总的步数为X = m+n-2，</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">               有  C(X,m-1)；</span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><hr/></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">关键点：关键点在于如果我们直接使用int或者long型来计算，会发生溢出；但是分母的个数和分子一样，因此可以在一个循环中同时对分母分子进行处理；</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">             </span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">方法一：使用浮点型，不停的将结果乘上分子，除以分母，这个时候需要小心二进制中份点数引起的误差；</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">代码实现</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>public class Solution {</div><div>    public int uniquePaths(int m, int n) {</div><div>       n = m + n -2;</div><div>        double result = 1;</div><div>        while(--m&gt;0){</div><div>            result = result*(n--)/m;</div><div>        }</div><div>        return (int)Math.round(result); //使用Math.round()是为了防止在二进制中浮点数相除引起的误差；</div><div>    }</div><div>}</div></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">方法二：使用long型；在每次添加分母乘数之前，都检查该乘数是否可以被分子整除，如果可以则直接用分子除以此乘数，反之分母乘以此乘数；在添加分子乘数的时候和分母的情况相同；在分别对分母和分子处理完后，在来判断分子是否可以整除分母，如果可以则作出相应的处理；</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">代码实现</span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>public class Solution {</div><div>    public int uniquePaths(int m, int n) {</div><div>       if(m == 1 || n == 1)return 1;</div><div>        n = m + n -2;</div><div>        long total = 1;</div><div>        long total2 = 1;</div><div>        while (--m &gt; 0) {</div><div>            if(total % m ==0){</div><div>                total /= m;</div><div>            }else {</div><div>                total2 *= m;</div><div>            }</div><div>            if(total2 % n ==0){</div><div>                total2 /= n;</div><div>            }else {</div><div>                total *= n;</div><div>            }</div><div>            if(total % total2 ==0){</div><div>                total /= total2;</div><div>                total2 = 1;</div><div>            }</div><div>            n--;</div><div>        }</div><div>        return (int)(total/total2);</div><div>    }</div><div>}</div></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><hr/></div><div>动态规划：</div><div><br/></div><div>     由于要达到（i，j）,首先要到达（i-1,j）或者（i，j-1），所以到达（i，j）的路径数量即为到达（i-1,j）和（i，j-1）的路径数量和。所以问题转化为求上一步的步数；</div><div>     </div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 24px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 500; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Unique Paths II（问题变型）</span></div><div><br/></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Follow up for &quot;Unique Paths&quot;:</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Now consider if some obstacles are added to the grids. How many unique paths would there be?</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">An obstacle and empty space is marked as <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">1</code> and <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">0</code> respectively in the grid.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">For example,<br style="box-sizing: border-box;"/></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">There is one obstacle in the middle of a 3x3 grid as illustrated below.</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">
[
  [0,0,0],
  [0,1,0],
  [0,0,0]
]
</pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">The total number of unique paths is <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">2</code>.</p><div style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><b style="box-sizing: border-box; font-weight: 700;">Note:</b> <i style="box-sizing: border-box;">m</i> and <i style="box-sizing: border-box;">n</i> will be at most 100.</div></div></div><div>就是在上一个问题上，增加一个处理，即在遇到障碍物时，直接将其路径数设为1；</div><div><br/></div><div><br/></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">     </span></span></span></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>什么是AOP</h1><b>来源网址：</b> <a href="http://blog.csdn.net/moreevan/article/details/11977115/">http://blog.csdn.net/moreevan/article/details/11977115/</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><h2 style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">什么是AOP</h2><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">AOP（Aspect-OrientedProgramming，面向方面编程），可以说是OOP（Object-Oriented Programing，面向对象编程）的补充和完善。OOP引入封装、继承和多态性等概念来建立一种对象层次结构，用以模拟公共行为的一个集合。当我们需要为分散的对象引入公共行为的时候，OOP则显得无能为力。也就是说，OOP允许你定义从上到下的关系，但并不适合定义从左到右的关系。例如日志功能。日志代码往往水平地散布在所有对象层次中，而与它所散布到的对象的核心功能毫无关系。对于其他类型的代码，如安全性、异常处理和透明的持续性也是如此。这种散布在各处的无关的代码被称为横切（cross-cutting）代码，在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">而AOP技术则恰恰相反，它利用一种称为“横切”的技术，剖解开封装的对象内部，并将那些影响了多个类的公共行为封装到一个可重用模块，并将其名为“Aspect”，即方面。所谓“方面”，简单地说，就是将那些与业务无关，却为业务模块所共同调用的逻辑或责任封装起来，便于减少系统的重复代码，降低模块间的耦合度，并有利于未来的可操作性和可维护性。AOP代表的是一个横向的关系，如果说“对象”是一个空心的圆柱体，其中封装的是对象的属性和行为；那么面向方面编程的方法，就仿佛一把利刃，将这些空心圆柱体剖开，以获得其内部的消息。而剖开的切面，也就是所谓的“方面”了。然后它又以巧夺天功的妙手将这些剖开的切面复原，不留痕迹。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">使用“横切”技术，AOP把软件系统分为两个部分：核心关注点和横切关注点。业务处理的主要流程是核心关注点，与之关系不大的部分是横切关注点。横切关注点的一个特点是，他们经常发生在核心关注点的多处，而各处都基本相似。比如权限认证、日志、事务处理。Aop 的作用在于分离系统中的各种关注点，将核心关注点和横切关注点分离开来。正如Avanade公司的高级方案构架师Adam Magee所说，AOP的核心思想就是“将应用程序中的商业逻辑同对其提供支持的通用服务进行分离。”</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">实现AOP的技术，主要分为两大类：一是采用动态代理技术，利用截取消息的方式，对该消息进行装饰，以取代原有对象行为的执行；二是采用静态织入的方式，引入特定的语法创建“方面”，从而使得编译器可以在编译期间织入有关“方面”的代码。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><br/></p><h2 style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><a name="t1" style="color: rgb(202, 0, 0); text-decoration: none;" target="_blank"></a>AOP使用场景</h2><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">AOP用来封装横切关注点，具体可以在下面的场景中使用:</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Authentication 权限</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Caching 缓存</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Context passing 内容传递</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Error handling 错误处理</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Lazy loading　懒加载</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Debugging　　调试</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">logging, tracing, profiling and monitoring　记录跟踪　优化　校准</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Performance optimization　性能优化</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Persistence　　持久化</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Resource pooling　资源池</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Synchronization　同步</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Transactions 事务</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><br/></p><h2 style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><a name="t2" style="color: rgb(202, 0, 0); text-decoration: none;" target="_blank"></a>AOP相关概念</h2><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">方面（Aspect）：一个关注点的模块化，这个关注点实现可能另外横切多个对象。事务管理是J2EE应用中一个很好的横切关注点例子。方面用<a href="http://lib.csdn.net/base/javaee" style="color: rgb(223, 52, 52); text-decoration: none; font-weight: bold;" target="_blank" title="Java EE知识库">spring</a>的 Advisor或拦截器实现。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">连接点（Joinpoint）: 程序执行过程中明确的点，如方法的调用或特定的异常被抛出。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">通知（Advice）: 在特定的连接点，AOP框架执行的动作。各种类型的通知包括“around”、“before”和“throws”通知。通知类型将在下面讨论。许多AOP框架包括Spring都是以拦截器做通知模型，维护一个“围绕”连接点的拦截器链。Spring中定义了四个advice: BeforeAdvice, AfterAdvice, ThrowAdvice和DynamicIntroductionAdvice</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">切入点（Pointcut）: 指定一个通知将被引发的一系列连接点的集合。AOP框架必须允许开发者指定切入点：例如，使用正则表达式。 Spring定义了Pointcut接口，用来组合MethodMatcher和ClassFilter，可以通过名字很清楚的理解， MethodMatcher是用来检查目标类的方法是否可以被应用此通知，而ClassFilter是用来检查Pointcut是否应该应用到目标类上</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">引入（Introduction）: 添加方法或字段到被通知的类。 Spring允许引入新的接口到任何被通知的对象。例如，你可以使用一个引入使任何对象实现 IsModified接口，来简化缓存。Spring中要使用Introduction, 可有通过DelegatingIntroductionInterceptor来实现通知，通过DefaultIntroductionAdvisor来配置Advice和代理类要实现的接口</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">目标对象（Target Object）: 包含连接点的对象。也被称作被通知或被代理对象。POJO</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">AOP代理（AOP Proxy）: AOP框架创建的对象，包含通知。 在Spring中，AOP代理可以是JDK动态代理或者CGLIB代理。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">织入（Weaving）: 组装方面来创建一个被通知对象。这可以在编译时完成（例如使用AspectJ编译器），也可以在运行时完成。Spring和其他纯<a href="http://lib.csdn.net/base/java" style="color: rgb(223, 52, 52); text-decoration: none; font-weight: bold;" target="_blank" title="Java 知识库">Java </a>AOP框架一样，在运行时完成织入。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><br/></p><h2 style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><a name="t3" style="color: rgb(202, 0, 0); text-decoration: none;" target="_blank"></a>Spring AOP组件</h2><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">下面这种类图列出了Spring中主要的AOP组件</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><img src="148. Sort List [2]_files/Image [3].png" type="image/png" style="border: none; max-width: 100%;"/><br/></p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><h2 style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><a name="t4" style="color: rgb(202, 0, 0); text-decoration: none;" target="_blank"></a>如何使用Spring AOP</h2><div style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><br/></div><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">可以通过配置文件或者编程的方式来使用Spring AOP。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">配置可以通过xml文件来进行，大概有四种方式：</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">1.        <span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: Arial, Helvetica, FreeSans, sans-serif;">配置ProxyFactoryBean，显式地设置advisors, advice, target等</span></p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">2.        配置AutoProxyCreator，这种方式下，还是如以前一样使用定义的bean，但是从容器中获得的其实已经是代理对象</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">3.        通过&lt;aop:config&gt;来配置</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">4.        通过&lt;aop: aspectj-autoproxy&gt;来配置，使用AspectJ的注解来标识通知及切入点</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">也可以直接使用ProxyFactory来以编程的方式使用Spring AOP，通过ProxyFactory提供的方法可以设置target对象, advisor等相关配置，最终通过 getProxy()方法来获取代理对象</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">具体使用的示例可以google. 这里略去</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><br/></p><h2 style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><a name="t5" style="color: rgb(202, 0, 0); text-decoration: none;" target="_blank"></a>Spring AOP代理对象的生成</h2><div style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><br/></div><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Spring提供了两种方式来生成代理对象: JDKProxy和Cglib，具体使用哪种方式生成由AopProxyFactory根据AdvisedSupport对象的配置来决定。默认的策略是如果目标类是接口，则使用JDK动态代理技术，否则使用Cglib来生成代理。下面我们来研究一下Spring如何使用JDK来生成代理对象，具体的生成代码放在JdkDynamicAopProxy这个类中，直接上相关代码：</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><br/></p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><div style="font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; background-color: rgb(231, 229, 220); width: 936.531px; overflow-x: auto; overflow-y: hidden; padding-top: 1px; text-align: left; margin: 18px 0px !important; position: relative; color: rgb(0, 0, 0); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left: 3px solid rgb(108, 226, 108);"><b>[java]</b> <a href="http://blog.csdn.net/moreevan/article/details/11977115/#" style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(&quot;images/default/ico_plain.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" target="_blank" title="view plain">view plain</a> <a href="http://blog.csdn.net/moreevan/article/details/11977115/#" style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(&quot;images/default/ico_copy.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">/**</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">    * &lt;ol&gt;</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">    * &lt;li&gt;获取代理类要实现的接口,除了Advised对象中配置的,还会加上SpringProxy, Advised(opaque=false)</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">    * &lt;li&gt;检查上面得到的接口中有没有定义 equals或者hashcode的接口</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">    * &lt;li&gt;调用Proxy.newProxyInstance创建代理对象</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">    * &lt;/ol&gt;</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">    */</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Object getProxy(ClassLoader classLoader) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (logger.isDebugEnabled()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           logger.debug(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Creating JDK dynamic proxy: target source is &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> +</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.advised.getTargetSource());  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       Class[] proxiedInterfaces =AopProxyUtils.completeProxiedInterfaces(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.advised);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       findDefinedEqualsAndHashCodeMethods(proxiedInterfaces);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Proxy.newProxyInstance(classLoader, proxiedInterfaces, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">那这个其实很明了，注释上我也已经写清楚了，不再赘述。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">下面的问题是，代理对象生成了，那切面是如何织入的？</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">我们知道InvocationHandler是JDK动态代理的核心，生成的代理对象的方法调用都会委托到InvocationHandler.invoke()方法。而通过JdkDynamicAopProxy的签名我们可以看到这个类其实也实现了InvocationHandler，下面我们就通过分析这个类中实现的invoke()方法来具体看下Spring AOP是如何织入切面的。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><div style="font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; background-color: rgb(231, 229, 220); width: 936.531px; overflow-x: auto; overflow-y: hidden; padding-top: 1px; text-align: left; margin: 18px 0px !important; position: relative; color: rgb(0, 0, 0); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left: 3px solid rgb(108, 226, 108);"><b>[java]</b> <a href="http://blog.csdn.net/moreevan/article/details/11977115/#" style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(&quot;images/default/ico_plain.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" target="_blank" title="view plain">view plain</a> <a href="http://blog.csdn.net/moreevan/article/details/11977115/#" style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(&quot;images/default/ico_copy.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">publicObject invoke(Object proxy, Method method, Object[] args) throwsThrowable {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       MethodInvocation invocation = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       Object oldProxy = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> setProxyContext = </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       TargetSource targetSource = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.advised.targetSource;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       Class targetClass = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       Object target = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">try</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//eqauls()方法，具目标对象未实现此方法</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.equalsDefined &amp;&amp; AopUtils.isEqualsMethod(method)){  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (equals(args[</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">])? Boolean.TRUE : Boolean.FALSE);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//hashCode()方法，具目标对象未实现此方法</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.hashCodeDefined &amp;&amp; AopUtils.isHashCodeMethod(method)){  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> newInteger(hashCode());  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//Advised接口或者其父接口中定义的方法,直接反射调用,不应用通知</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.advised.opaque &amp;&amp;method.getDeclaringClass().isInterface()  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    &amp;&amp;method.getDeclaringClass().isAssignableFrom(Advised.<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">class</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Service invocations onProxyConfig with the proxy config...</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> AopUtils.invokeJoinpointUsingReflection(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.advised,method, args);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           Object retVal = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.advised.exposeProxy) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Make invocation available ifnecessary.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                oldProxy = AopContext.setCurrentProxy(proxy);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                setProxyContext = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//获得目标对象的类</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           target = targetSource.getTarget();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (target != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                targetClass = target.getClass();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//获取可以应用到此方法上的Interceptor列表</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           List chain = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.advised.getInterceptorsAndDynamicInterceptionAdvice(method,targetClass);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//如果没有可以应用到此方法的通知(Interceptor)，此直接反射调用 method.invoke(target, args)</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (chain.isEmpty()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                retVal = AopUtils.invokeJoinpointUsingReflection(target,method, args);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//创建MethodInvocation</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                invocation = newReflectiveMethodInvocation(proxy, target, method, args, targetClass, chain);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                retVal = invocation.proceed();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Massage return value if necessary.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (retVal != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> &amp;&amp; retVal == target &amp;&amp;method.getReturnType().isInstance(proxy)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    &amp;&amp;!RawTargetAccess.<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">class</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.isAssignableFrom(method.getDeclaringClass())) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Special case: it returned&quot;this&quot; and the return type of the method</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// is type-compatible. Notethat we can't help if the target sets</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// a reference to itself inanother returned object.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                retVal = proxy;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> retVal;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">finally</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (target != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> &amp;&amp; !targetSource.isStatic()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Must have come fromTargetSource.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">               targetSource.releaseTarget(target);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (setProxyContext) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Restore old proxy.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                AopContext.setCurrentProxy(oldProxy);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li></ol></div><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">主流程可以简述为：获取可以应用到此方法上的通知链（Interceptor Chain）,如果有,则应用通知,并执行joinpoint; 如果没有,则直接反射执行joinpoint。而这里的关键是通知链是如何获取的以及它又是如何执行的，下面逐一分析下。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">首先，从上面的代码可以看到，通知链是通过Advised.getInterceptorsAndDynamicInterceptionAdvice()这个方法来获取的,我们来看下这个方法的实现:</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><div style="font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; background-color: rgb(231, 229, 220); width: 936.531px; overflow-x: auto; overflow-y: hidden; padding-top: 1px; text-align: left; margin: 18px 0px !important; position: relative; color: rgb(0, 0, 0); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left: 3px solid rgb(108, 226, 108);"><b>[java]</b> <a href="http://blog.csdn.net/moreevan/article/details/11977115/#" style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(&quot;images/default/ico_plain.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" target="_blank" title="view plain">view plain</a> <a href="http://blog.csdn.net/moreevan/article/details/11977115/#" style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(&quot;images/default/ico_copy.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> List&lt;Object&gt;getInterceptorsAndDynamicInterceptionAdvice(Method method, Class targetClass) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                   MethodCacheKeycacheKey = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> MethodCacheKey(method);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                   List&lt;Object&gt;cached = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.methodCache.get(cacheKey);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                   <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(cached == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                            cached= <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.advisorChainFactory.getInterceptorsAndDynamicInterceptionAdvice(  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                                               <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">,method, targetClass);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.methodCache.put(cacheKey,cached);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                   }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                   returncached;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">         }  </span></li></ol></div><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">可以看到实际的获取工作其实是由AdvisorChainFactory. getInterceptorsAndDynamicInterceptionAdvice()这个方法来完成的，获取到的结果会被缓存。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">下面来分析下这个方法的实现：</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><div style="font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; background-color: rgb(231, 229, 220); width: 936.531px; overflow-x: auto; overflow-y: hidden; padding-top: 1px; text-align: left; margin: 18px 0px !important; position: relative; color: rgb(0, 0, 0); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left: 3px solid rgb(108, 226, 108);"><b>[java]</b> <a href="http://blog.csdn.net/moreevan/article/details/11977115/#" style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(&quot;images/default/ico_plain.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" target="_blank" title="view plain">view plain</a> <a href="http://blog.csdn.net/moreevan/article/details/11977115/#" style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(&quot;images/default/ico_copy.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">/**</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">    * 从提供的配置实例config中获取advisor列表,遍历处理这些advisor.如果是IntroductionAdvisor,</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">    * 则判断此Advisor能否应用到目标类targetClass上.如果是PointcutAdvisor,则判断</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">    * 此Advisor能否应用到目标方法method上.将满足条件的Advisor通过AdvisorAdaptor转化成Interceptor列表返回.</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">    */</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    publicList getInterceptorsAndDynamicInterceptionAdvice(Advised config, Methodmethod, Class targetClass) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// This is somewhat tricky... we have to process introductions first,</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// but we need to preserve order in the ultimate list.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       List interceptorList = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> ArrayList(config.getAdvisors().length);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//查看是否包含IntroductionAdvisor</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> hasIntroductions = hasMatchingIntroductions(config,targetClass);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//这里实际上注册一系列AdvisorAdapter,用于将Advisor转化成MethodInterceptor</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       AdvisorAdapterRegistry registry = GlobalAdvisorAdapterRegistry.getInstance();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       Advisor[] advisors = config.getAdvisors();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">for</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">int</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> i = </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">; i &lt;advisors.length; i++) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           Advisor advisor = advisors[i];  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (advisor </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">instanceof</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> PointcutAdvisor) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Add it conditionally.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                PointcutAdvisor pointcutAdvisor= (PointcutAdvisor) advisor;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(config.isPreFiltered() ||pointcutAdvisor.getPointcut().getClassFilter().matches(targetClass)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//TODO: 这个地方这两个方法的位置可以互换下</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//将Advisor转化成Interceptor</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    MethodInterceptor[]interceptors = registry.getInterceptors(advisor);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//检查当前advisor的pointcut是否可以匹配当前方法</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    MethodMatcher mm =pointcutAdvisor.getPointcut().getMethodMatcher();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (MethodMatchers.matches(mm,method, targetClass, hasIntroductions)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(mm.isRuntime()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Creating a newobject instance in the getInterceptors() method</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// isn't a problemas we normally cache created chains.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">for</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (intj = </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">; j &lt; interceptors.length; j++) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                               interceptorList.add(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> InterceptorAndDynamicMethodMatcher(interceptors[j],mm));  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                            interceptorList.addAll(Arrays.asList(interceptors));  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (advisor </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">instanceof</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> IntroductionAdvisor){  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                IntroductionAdvisor ia =(IntroductionAdvisor) advisor;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(config.isPreFiltered() || ia.getClassFilter().matches(targetClass)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    Interceptor[] interceptors= registry.getInterceptors(advisor);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    interceptorList.addAll(Arrays.asList(interceptors));  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                Interceptor[] interceptors =registry.getInterceptors(advisor);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                interceptorList.addAll(Arrays.asList(interceptors));  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> interceptorList;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">这个方法执行完成后，Advised中配置能够应用到连接点或者目标类的Advisor全部被转化成了MethodInterceptor.</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">接下来我们再看下得到的拦截器链是怎么起作用的。</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><div style="font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; background-color: rgb(231, 229, 220); width: 936.531px; overflow-x: auto; overflow-y: hidden; padding-top: 1px; text-align: left; margin: 18px 0px !important; position: relative; color: rgb(0, 0, 0); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left: 3px solid rgb(108, 226, 108);"><b>[java]</b> <a href="http://blog.csdn.net/moreevan/article/details/11977115/#" style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(&quot;images/default/ico_plain.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" target="_blank" title="view plain">view plain</a> <a href="http://blog.csdn.net/moreevan/article/details/11977115/#" style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(&quot;images/default/ico_copy.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (chain.isEmpty()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                retVal = AopUtils.invokeJoinpointUsingReflection(target,method, args);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//创建MethodInvocation</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                invocation = newReflectiveMethodInvocation(proxy, target, method, args, targetClass, chain);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                retVal = invocation.proceed();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li></ol></div><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">        </p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">         从这段代码可以看出，如果得到的拦截器链为空，则直接反射调用目标方法，否则创建MethodInvocation，调用其proceed方法，触发拦截器链的执行，来看下具体代码</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><div style="font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; background-color: rgb(231, 229, 220); width: 936.531px; overflow-x: auto; overflow-y: hidden; padding-top: 1px; text-align: left; margin: 18px 0px !important; position: relative; color: rgb(0, 0, 0); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left: 3px solid rgb(108, 226, 108);"><b>[java]</b> <a href="http://blog.csdn.net/moreevan/article/details/11977115/#" style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(&quot;images/default/ico_plain.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" target="_blank" title="view plain">view plain</a> <a href="http://blog.csdn.net/moreevan/article/details/11977115/#" style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(&quot;images/default/ico_copy.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Object proceed() </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">throws</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Throwable {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//  We start with an index of -1and increment early.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.currentInterceptorIndex == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.interceptorsAndDynamicMethodMatchers.size()- </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">1</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//如果Interceptor执行完了，则执行joinPoint</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> invokeJoinpoint();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       Object interceptorOrInterceptionAdvice =  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.interceptorsAndDynamicMethodMatchers.get(++</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.currentInterceptorIndex);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">         </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//如果要动态匹配joinPoint</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (interceptorOrInterceptionAdvice </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">instanceof</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> InterceptorAndDynamicMethodMatcher){  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Evaluate dynamic method matcher here: static part will already have</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// been evaluated and found to match.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           InterceptorAndDynamicMethodMatcher dm =  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                (InterceptorAndDynamicMethodMatcher)interceptorOrInterceptionAdvice;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//动态匹配：运行时参数是否满足匹配条件</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (dm.methodMatcher.matches(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.method, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.targetClass,</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.arguments)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//执行当前Intercetpor</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                returndm.interceptor.invoke(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//动态匹配失败时,略过当前Intercetpor,调用下一个Interceptor</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> proceed();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// It's an interceptor, so we just invoke it: The pointcutwill have</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// been evaluated statically before this object was constructed.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//执行当前Intercetpor</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">           <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> ((MethodInterceptor) interceptorOrInterceptionAdvice).invoke(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92); list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">       }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; list-style-type: decimal-leading-zero; list-style-image: initial; background-color: rgb(255, 255, 255); color: inherit; list-style-position: outside !important;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><br style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">代码也比较简单，这里不再赘述。</p><div style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><br/></div></div><div style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div> </div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>Insert Interval</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/insert-interval/#/description">https://leetcode.com/problems/insert-interval/#/description</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 24px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 500; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Insert Interval</span></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Given a set of <i style="box-sizing: border-box;">non-overlapping</i> intervals, insert a new interval into the intervals (merge if necessary).</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">You may assume that the intervals were initially sorted according to their start times.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><b style="box-sizing: border-box; font-weight: 700;">Example 1:</b><br style="box-sizing: border-box;"/>
Given intervals <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">[1,3],[6,9]</code>, insert and merge <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">[2,5]</code> in as <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">[1,5],[6,9]</code>.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><b style="box-sizing: border-box; font-weight: 700;">Example 2:</b><br style="box-sizing: border-box;"/>
Given <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">[1,2],[3,5],[6,7],[8,10],[12,16]</code>, insert and merge <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">[4,9]</code> in as <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">[1,2],[3,10],[12,16]</code>.</p><div style="box-sizing: border-box; margin: 0px 0px 10px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">This is because the new interval </span></span></span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">[4,9]</code><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> overlaps with </span></span></span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">[3,5],[6,7],[8,10]</code><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">.</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div><hr/></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">解决：当</span></span></span>intervals为空，直接返回新区间；</div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">       解法一： 首先将新的区间按照start插入到</span></span></span>intervals 中，之后则直接遍历intervals，合并各个区间，输出结果；这个方法简单，但是插入会损耗时间；</div><div>       解法二：  不将新的区间插入，在遍历每一个intervals 中的区间的时候，都将新的区间拿出来比较：</div><div>                      情况一： 如果新区间在最开始。在一开始就直接将新区间加入到intervals的头；并将其设置为空，在后面不会在使用；</div><div>                      情况二： 如果新区间在中间。在每次遍历一个intervals的区间时，如果新空间不为空，则判断新区间与以遍历区间是否有交集，有则处理，并设置为空；之后继续处理当前遍历的区间，也就是说在遍历每一个区间的时候，都要对新区间和遍历的区间进行处理。如果讲个区间都与以便利区间无交集，则在下一个开始的时候继续从情况一开始。</div><div>                      情况三： 如果新区间在最后面。在遍历完intervals后，判断新区间与最后遍历合成的区间是否有交集。有则处理，无则可以将新区间直接输出；</div><div>                      注意：如果在新区间被使用了之后，将新区间设置为空，可以减少后面的判断；</div><div><br/></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>/**</div><div> * Definition for an interval.</div><div> * public class Interval {</div><div> *     int start;</div><div> *     int end;</div><div> *     Interval() { start = 0; end = 0; }</div><div> *     Interval(int s, int e) { start = s; end = e; }</div><div> * }</div><div> */</div><div>public class Solution {</div><div>    public List&lt;Interval&gt; insert(List&lt;Interval&gt; intervals, Interval newInterval) {</div><div>        if(intervals.size() == 0){</div><div>            intervals.add(newInterval);</div><div>            return intervals;</div><div>        }</div><div>        List&lt;Interval&gt; interval = new ArrayList&lt;Interval&gt;();</div><div>        if(newInterval.start &lt; intervals.get(0).start){</div><div>            intervals.add(0,newInterval);</div><div>            newInterval = null;</div><div>        }</div><div>        int start = intervals.get(0).start;</div><div>        int end = intervals.get(0).end;</div><div>        for(int j = 1; j &lt; intervals.size()  ; j++) {</div><div>            if(newInterval != null &amp;&amp; newInterval.start &lt;= end){</div><div>                end = Math.max(newInterval.end,end);</div><div>                newInterval = null;</div><div>            }</div><div>            if(end &gt;= intervals.get(j).start){</div><div>                end = Math.max(intervals.get(j).end,end);</div><div>                continue;</div><div>            }</div><div>            Interval newinInterval = new Interval();</div><div>            newinInterval.start = start;</div><div>            newinInterval.end = end;</div><div>            interval.add(newinInterval);</div><div>            if(newInterval != null &amp;&amp; newInterval.start &lt; intervals.get(j).start){</div><div>                intervals.add(j,newInterval);</div><div>                newInterval = null;</div><div>            }</div><div>            start = intervals.get(j).start;</div><div>            end = intervals.get(j).end;</div><div>        }if(newInterval != null &amp;&amp; newInterval.start &lt;= end){</div><div>            end = Math.max(newInterval.end,end);</div><div>            newInterval = null;</div><div>        }</div><div>        Interval newinInterval = new Interval();</div><div>        newinInterval.start = start;</div><div>        newinInterval.end = end;</div><div>        interval.add(newinInterval);</div><div>        if(newInterval != null)</div><div>            interval.add(newInterval);</div><div>        return interval;</div><div>    }</div><div>}</div></div><div><br/></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>Poor Pigs</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/poor-pigs/#/description">https://leetcode.com/problems/poor-pigs/#/description</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 24px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 500; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Poor Pigs</span></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">There are 1000 buckets, one and only one of them contains poison, the rest are filled with water. They all look the same. If a pig drinks that poison it will die within 15 minutes. What is the minimum amount of pigs you need to figure out which bucket contains the poison within one hour.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Answer this question, and write an algorithm for the follow-up general case.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><b style="box-sizing: border-box; font-weight: 700;">Follow-up:</b></p><div style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>If there are n buckets and a pig drinking poison will die within m minutes, how many pigs (x) you need to figure out the &quot;poison&quot; bucket within p minutes? There is exact one bucket with poison.</div><div><br/></div><hr/><div>解决</div><div>     </div><table style="border-collapse: collapse; margin-left: 0px;table-layout:fixed;width:18.311345646437996%;"><tbody><tr><td style="border: 1px solid rgb(211, 211, 211); padding: 10px; margin: 0px;width:20.172910662824208%;"><div style="text-align: center">1</div></td><td style="border: 1px solid rgb(211, 211, 211); padding: 10px; margin: 0px;width:20.172910662824208%;"><div style="text-align: center">2</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:19.88472622478386%;"><div style="text-align: center">3</div></td><td style="border: 1px solid rgb(211, 211, 211); padding: 10px; margin: 0px;width:19.88472622478386%;"><div style="text-align: center">4</div></td><td style="border: 1px solid rgb(211, 211, 211); padding: 10px; margin: 0px;width:19.596541786743515%;"><div style="text-align: center">5</div></td></tr><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">6</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">7</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">8</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">9</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">10</div></td></tr><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">11</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">12</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">13</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">14</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">15</div></td></tr><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">16</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">17</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">18</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">19</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">20</div></td></tr><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">21</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">22</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">23</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">24</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:20%;"><div style="text-align: center">25</div></td></tr></tbody></table></div><div style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>条件 一个小时，死亡时间15分钟，所以在一个5x5的二矩阵中，用两只小猪就可以检查buckets数量在（5，25]之间的毒药在哪里。一个小猪可以在四个死亡时间里测试完一个维度。</div><div>则有3只小猪可以测试5x5x5的三位矩阵，以此类推；</div><div><br/></div><div>推广：一个维度一个小猪，因此维度数即为小猪的数量，重点在于要用几个维度来表示整个矩阵；首先每个维度的尺寸范围就为T（T=testtime / deadtime +1），维度数为N，则有T的N方大于等于buckets数，T的N-1方小于buckets数；</div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>Single Element in a Sorted Array</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/single-element-in-a-sorted-array/#/description">https://leetcode.com/problems/single-element-in-a-sorted-array/#/description</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 24px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 500; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Single Element in a Sorted Array</span></div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Given a sorted array consisting of only integers where every element appears twice except for one element which appears once. Find this single element that appears only once.</span></div><div style="box-sizing: border-box; margin: 0px 0px 10px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><b style="box-sizing: border-box; font-weight: 700;">Example 1:</b><br style="box-sizing: border-box;"/></p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><b style="box-sizing: border-box; font-weight: 700;">Input:</b> [1,1,2,3,3,4,4,8,8]
<b style="box-sizing: border-box; font-weight: 700;">Output:</b> 2
</pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><b style="box-sizing: border-box; font-weight: 700;">Example 2:</b><br style="box-sizing: border-box;"/></p><div style="box-sizing: border-box; overflow: auto; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);"><b style="box-sizing: border-box; font-weight: 700;">Input:</b> [3,3,7,7,10,11,11]</span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><b style="box-sizing: border-box; font-weight: 700;">Output:</b> 10</span></span></div></div></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><hr/></div><div>解决</div><div>     时间复杂度O（log n），空间复杂度O（1）.</div><div>     考虑使用二分法解题，</div><div>               情况一：如果中间的数与左右的数都不相同，则这个数就是要寻找的数。</div><div>               情况二：如果中间的数与左右中的其中个数相同，则将数组分为三个部分，中间相同的数为一部分（在这一步一定会被消除），左边一部分，右边一部分，这个时候考虑左右这两部分。如果某部分没有包含只出现一次的数，则明显这部分的长度为偶数。因此我们可以同过计算某一部分的长度来决定在下一次的迭代中迭代那部分数组。</div><div><br/></div><div><hr/></div><div>代码实现</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>public class Solution {</div><div>    public int singleNonDuplicate(int[] nums) {</div><div>        int start = 0;</div><div>        int end = nums.length;</div><div>        int mid,midgo;</div><div>        while(start != end){</div><div>            mid = (start + end) / 2;</div><div>            if(mid + 1 &lt; nums.length &amp;&amp; nums[mid] == nums[mid+1]){</div><div>                midgo = mid;</div><div>                mid++;</div><div>            }else if(mid - 1&gt;= 0 &amp;&amp; nums[mid] == nums[mid-1]){</div><div>                midgo = mid - 1;</div><div>            }else {</div><div>                return nums[mid];</div><div>            }</div><div>            if((midgo - start)% 2 != 0){</div><div>                end = midgo - 1;</div><div>                continue;</div><div>            }else{</div><div>                start = mid + 1;</div><div>                continue;</div><div>            }</div><div>        }</div><div>        return nums[start];    </div><div>    }</div><div>}</div></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><br/></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>Rotate Image</h1><b>来源网址：</b> <a href="https://leetcode.com/problems/rotate-image/#/description">https://leetcode.com/problems/rotate-image/#/description</a><br/><b>作者：</b> 826403859@qq.com<br/></td></tr></table></div><div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 24px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 500; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Rotate Image</span></div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">You are given an <i style="box-sizing: border-box;">n</i> x <i style="box-sizing: border-box;">n</i> 2D matrix representing an image.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">Rotate the image by 90 degrees (clockwise).</p><div style="box-sizing: border-box; margin: 0px 0px 10px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">Follow up:</span></span></span><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">Could you do this in-place?</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"> 解决： 这题主要需要弄明白方阵中的每个数在顺时针旋转90°后的位置与其之前的位置有什么关系，只要找到这个关系，不管是在方阵内变化，还是在创建一个方阵来记录旋转后的位置，都将信手拈来。</span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><hr/></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">关系：设原来坐标为（i，j）；旋转后的坐标为（ci，cj）；</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">          有ci = j；</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">              cj =  n - i - 1;</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">在方阵内旋转，只需要遍历部分数字，每遍历一个数字，同时将其对应的之后的三个位置的也旋转更新。</span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><hr/></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">如图：在下面4x4方阵中，区域1即为遍历部分，（虚线部分不用遍历），在遍历一个区域1的数值A时，将其旋转到区域2中对应的位置，接着将区域2此位置的数值应道区域3中对应位置，接着区域3到区域4，区域4到区域1，当进行到这个时候，则意味着数值A在四个区域对应的数值都已经旋转完毕。接着遍历下一个数，知道区域1中的数被遍历完为止。</span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);">当方阵越大，四个区域越接近为三角形。</span></span></span></div><div><img src="148. Sort List [2]_files/Image [4].png" type="image/png" style="height: auto;"/></div><div><br/></div><div>代码实现：</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>public class Solution {</div><div>    public void rotate(int[][] matrix) {</div><div>        int len = matrix.length;</div><div>        int ai,aj,temp,temp1;</div><div>        for(int i = 0; i &lt; len/2; i++){</div><div>            for(int j = i; j &lt; len -i-1; j++){</div><div>                ai = j;</div><div>                aj = len - i -1;</div><div>                temp = matrix[i][j];</div><div>                while(ai != i || aj != j ){</div><div>                    temp1 = matrix[ai][aj];</div><div>                    matrix[ai][aj] = temp;</div><div>                    temp = temp1;</div><div>                    temp1 = ai ;</div><div>                    ai = aj;</div><div>                    aj = len - temp1 -1;</div><div>                }</div><div>                matrix[i][j] = temp;</div><div>            }</div><div>        }</div><div>    }</div><div>}</div></div><div><br/></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><br/></span></span></span></div></div></div></div><br/></div></span>
</div></body></html> 